/*
* uxRunner v.0.0.0
* (c) 2014, WebUX
* License: MIT.
*/
!function(a){function b(b,c){var d,e,f,g=0;if(arguments.length>2&&(f=a.util.array.toArray(arguments),f.splice(0,2)),b&&b.length)for(d=b.length;d>g;){if(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e)return e;g+=1}else if(!(b instanceof Array))for(g in b)if(b.hasOwnProperty(g)&&(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e))return e;return b}function c(a){var b=[],c=0,d=a.length;if(void 0!==a.length)for(;d>c;)b.push(a[c]),c+=1;else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function d(a,b){var c,d,e,f,g;for(b||(b=function(a,b){return a>b?1:b>a?-1:0}),d=a.length,f=d-1,c=0;d>c;c+=1)for(e=0;f>e;e+=1)b(a[e],a[e+1])>0&&(g=a[e+1],a[e+1]=a[e],a[e]=g);return a}function e(a,b){this.el=a=ux.runner.locals.$(a),a.scope&&(this.scope=a.scope());var c="text password number email url search tel";this.isEditable=/textarea|select/i.test(a[0].nodeName)||a[0].type&&c.indexOf(a[0].type.toLowerCase())>-1,this.isEditable&&(this.selStart=a.getSelectionStart()||0,this.selEnd=a.getSelectionEnd()||a.val().length,a.setSelection(this.selStart,this.selEnd),this.cursorPosition=this.selEnd),this.capsLocked=!1,b&&this.lock()}function f(a,b){var c={label:"sendKeys "+a,method:function(){c.element.length&&e.exec(c.element,a)},validate:function(){if(!c.element.length)return c.label="sendKeys failed because there is no element selected.",!1;if(b){var a="ng-model",d=c.element.attr(a)||c.element.attr("data-"+a);return c.value=d?c.element.scope().$eval(d):c.element.val(),c.value+""==b+""}return!0}};return c}!function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}(),function(a){"use strict";var b={trace:function(b){void 0!==a.console&&a.console.log("Porthole: "+b)},error:function(b){void 0!==a.console&&a.console.error("Porthole: "+b)}};b.WindowProxy=function(){},b.WindowProxy.prototype={post:function(){},addEventListener:function(){},removeEventListener:function(){}},b.WindowProxyBase=Class.extend({init:function(b){void 0===b&&(b=""),this.targetWindowName=b,this.origin=a.location.protocol+"//"+a.location.host,this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},getTargetWindow:function(){return b.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(b,c){void 0===c&&(c="*"),this.dispatchMessage({data:b,sourceOrigin:this.getOrigin(),targetOrigin:c,sourceWindowName:a.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(a){return this.eventListeners.push(a),a},removeEventListener:function(a){var b;b=this.eventListeners.indexOf(a),this.eventListeners.splice(b,1)},dispatchEvent:function(a){var b;for(b=0;b<this.eventListeners.length;b++)this.eventListeners[b](a)}}),b.WindowProxyLegacy=b.WindowProxyBase.extend({init:function(a,b){if(this._super(b),null===a)throw this.proxyIFrameElement=null,new Error("proxyIFrameUrl can't be null");this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=a,this.proxyIFrameElement=this.createIFrameProxy()},createIFrameProxy:function(){var a=document.createElement("iframe");return a.setAttribute("id",this.proxyIFrameName),a.setAttribute("name",this.proxyIFrameName),a.setAttribute("src",this.proxyIFrameLocation),a.setAttribute("frameBorder","1"),a.setAttribute("scrolling","auto"),a.setAttribute("width",30),a.setAttribute("height",30),a.setAttribute("style","position: absolute; left: -100px; top:0px;"),a.style.setAttribute&&a.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(a),a},dispatchMessage:function(c){var d=a.encodeURIComponent;if(this.proxyIFrameElement){var e=this.proxyIFrameLocation+"#"+d(b.WindowProxy.serialize(c));this.proxyIFrameElement.setAttribute("src",e),this.proxyIFrameElement.height=this.proxyIFrameElement.height>50?50:100}}}),b.WindowProxyHTML5=b.WindowProxyBase.extend({init:function(a,b){this._super(b),this.eventListenerCallback=null},dispatchMessage:function(a){this.getTargetWindow().postMessage(b.WindowProxy.serialize(a),a.targetOrigin)},addEventListener:function(b){if(0===this.eventListeners.length){var c=this;this.eventListenerCallback=function(a){c.eventListener(c,a)},a.addEventListener("message",this.eventListenerCallback,!1)}return this._super(b)},removeEventListener:function(b){this._super(b),0===this.eventListeners.length&&(a.removeEventListener("message",this.eventListenerCallback),this.eventListenerCallback=null)},eventListener:function(a,c){var d=b.WindowProxy.unserialize(c.data);!d||""!=a.targetWindowName&&d.sourceWindowName!=a.targetWindowName||a.dispatchEvent(new b.MessageEvent(d.data,c.origin,a))}}),"function"!=typeof a.postMessage?(b.trace("Using legacy browser support"),b.WindowProxy=b.WindowProxyLegacy.extend({})):(b.trace("Using built-in browser support"),b.WindowProxy=b.WindowProxyHTML5.extend({})),b.WindowProxy.serialize=function(a){if("undefined"==typeof JSON)throw new Error("Porthole serialization depends on JSON!");return JSON.stringify(a)},b.WindowProxy.unserialize=function(a){if("undefined"==typeof JSON)throw new Error("Porthole unserialization dependens on JSON!");var b=JSON.parse(a);return b},b.WindowProxy.getTargetWindow=function(b){return""===b?top:"top"===b||"parent"===b?a[b]:parent.frames[b]},b.MessageEvent=function(a,b,c){this.data=a,this.origin=b,this.source=c},b.WindowProxyDispatcher={forwardMessageEvent:function(){var c,d,e,f=a.decodeURIComponent;document.location.hash.length>0&&(c=b.WindowProxy.unserialize(f(document.location.hash.substr(1))),d=b.WindowProxy.getTargetWindow(c.targetWindowName),e=b.WindowProxyDispatcher.findWindowProxyObjectInWindow(d,c.sourceWindowName),e?e.origin===c.targetOrigin||"*"===c.targetOrigin?e.dispatchEvent(new b.MessageEvent(c.data,c.sourceOrigin,e)):b.error("Target origin "+e.origin+" does not match desired target of "+c.targetOrigin):b.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(a,b){var c;if(a.RuntimeObject&&(a=a.RuntimeObject()),a)for(c in a)if(a.hasOwnProperty(c)&&null!==a[c]&&"object"==typeof a[c]&&a[c]instanceof a.Porthole.WindowProxy&&a[c].getTargetWindowName()===b)return a[c];return null},start:function(){a.addEventListener?a.addEventListener("resize",b.WindowProxyDispatcher.forwardMessageEvent,!1):document.body.attachEvent?a.attachEvent("onresize",b.WindowProxyDispatcher.forwardMessageEvent):b.error("Cannot attach resize event")}},"undefined"!=typeof a.exports?a.exports.Porthole=b:a.Porthole=b}(this),a.each=b,a.extend=function(b){for(var c,d,e=a.util.array.toArray(arguments),f=1,g=e.length;g>f;){c=e[f];for(d in c)b[d]=b[d]&&"object"==typeof b[d]?a.extend(b[d],c[d]):c[d];f+=1}return b},a.selector=function(){function b(a,b){b=b||z.config.doc.body;var c,d,e=/:eq\((\d+)\)$/,f=a.match(e);return f&&f.length&&(a=a.replace(e,""),d=f[1]),c=b.querySelectorAll(a),c&&void 0!==d?c[d]:c}function c(c,d){if(e(c)){for(var g,i,k,l=j(d),m=z.config.doc.body,n=h(c,m,l,null,!0);n.count>n.totalCount;)n=n.parent;if(n=n.parent||n,k=n.str||q(n),n.str)for(var o=n.child;o;)k+=" "+o.str,o=o.child;return(n.count>1||n.child&&n.child.count)&&(g=a.util.array.toArray(b(k,m)),i=g.indexOf(c),k+=":eq("+i+")"),k+=f()}return""}function d(a,b,c){if(e(a)){var d=j(c),g=h(a,b,d);return q(g)+f()}return""}function e(a){if(!a)return"";if(a&&a.length)throw new Error("selector can only build a selection to a single DOMElement. A list was passed.");return!0}function f(){return z.config.addVisible?":visible":""}function g(a,b){return"string"==typeof b&&b===a?!0:"object"==typeof b&&a.match(b)?!0:!1}function h(a,b,c,d,e){var f;return a?(b=b||z.config.doc,f={element:a,ignoreClass:c,maxParent:b,classes:k(a,c),attributes:l(a,d),type:a.nodeName&&a.nodeName.toLowerCase()||"",child:d},(!f.attributes.$unique||d)&&(e?(f.str=q(f,0,null,!0),f.count=b.querySelectorAll(f.str).length,f.count>1&&(f.parent=s(a,b,c,f,e))):f.parent=s(a,b,c,f,e)),f):""}function i(a){return"number"!=typeof a}function j(a){return a=a||[],"function"==typeof a?a:function(b){if(a instanceof Array)for(var c=0,d=a.length;d>c;){if(g(b,a[c]))return!1;c+=1}else if(g(b,a))return!1;return!0}}function k(a,b){var c=ux.filter(a.classList,i);return c=ux.filter(c,y),ux.filter(c,b)}function l(a){var b,c=0,d=a.attributes?a.attributes.length:0,e=[],f=n(a.attributes);if(f&&("id"===f.name&&z.config.allowId?e.push("#"+f.value):"id"!==f.name&&e.push(m(f)),e.length))return e.$unique=!0,e;if(z.config.allowAttributes)for(;d>c;)b=a.attributes[c],v[b.name]||w[b.name]||e.push(m(b)),c+=1;return e}function m(a){return"["+o(a.name)+"='"+p(a.value)+"']"}function n(a){for(var b,c,d=0,e=a?a.length:0;e>d;){if(b=a[d],c=o(b.name),w[c])return b;d+=1}return null}function o(a){var b,c,d=1;if(a.indexOf("-")){for(b=a.split("-"),c=b.length;c>d;)b[d]=b[d].charAt(0).toUpperCase()+b[d].substr(1),d+=1;a=b.join("")}return a}function p(a){return a.replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(a,b,c,d){var e,f,g;return b=b||0,f=a&&!a.attributes.$unique?q(a.parent,b+1):"",a&&(f+=(f.length?" ":"")+r(a)),b||d||(g=c||a.maxParent,e=g.querySelectorAll&&g.querySelectorAll(f)||[],e.length>1&&(f+=":eq("+t(e,a.element)+")")),f}function r(a){return a.attributes.$unique?a.attributes[0]:a.type+a.attributes.join("")+(a.classes.length?"."+a.classes.join("."):"")}function s(a,b,c,d,e){var f=a.parentNode;return f&&f!==b?h(a.parentNode,b,c,d,e):null}function t(a,b){var c,d=a.length;for(c=0;d>c;c+=1)if(b===a[c])return c;return-1}function u(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}var v,w,x,y,z;return z={config:{doc:window.document,allowId:!0,allowAttributes:!0,addVisible:!1},addOmitAttrs:function(){return a.each(arguments,function(a){v[a]=!0}),this},removeOmitAttrs:function(){return a.each(arguments,function(a){delete v[a]}),this},getOmitAttrs:function(){return u(v)},resetOmitAttrs:function(){v={"class":!0,style:!0}},addUniqueAttrs:function(){return a.each(arguments,function(a){w[a]=!0}),this},removeUniqueAttrs:function(){return a.each(arguments,function(a){delete w[a]}),this},getUniqueAttrs:function(){return u(w)},resetUniqueAttrs:function(){w={id:!0,uid:!0}},addClassOmitFilters:function(){return a.each(arguments,function(a){x.push(a)}),y=j(x),this},removeClassOmitFilters:function(){return a.each(arguments,function(a){var b=x.indexOf(a);-1!==b&&x.splice(b,1)}),y=j(x),this},getClassOmitFilters:function(){return x.slice(0)},resetClassOmitFilters:function(){x=[],y=j(x)},query:b,get:c,getCleanSelector:c,quickSelector:d,reset:function(){z.resetOmitAttrs(),z.resetUniqueAttrs(),z.resetClassOmitFilters()}},z.reset(),z}(),a.util=a.util||{},a.util.array=a.util.array||{},a.util.array.toArray=c,a.util.array.sort=d,ex.elementMethods.push(function(a){a.scrollUp=function(b){return a.custom("scrollUp",function(){return a.element.scrollTop(a.element.scrollTop()-b)})},a.scrollDown=function(b){return a.custom("scrollDown",function(){return a.element.scrollTop(a.element.scrollTop()+b)})}}),e.exec=function(a,b){var c,d,f=new e(a),g=b.match(/"[^"]+"|\w+/gim),h=0,i=g.length;for(f.lock();i>h;)d=g[h],c=d.match(/[^"]+/gim)[0],"delete"===c&&(c="del"),"function"==typeof f[c]?f[c]():f.type(c),f.release(),h+=1};var g=e.prototype;g.checkShiftKey=function(a){var b=a.toUpperCase();return b===a?!0:!1},g.key={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,"*":106,"+":107,"-":109,".":110,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"=":187,",":188,"/":191,"\\":220},g.type=function(a,b){var c,d,e;for(this.selStart!==this.selEnd&&(c=this.el.val(),c=c.substr(0,this.selStart)+c.substr(this.selEnd),this.el.val(c),this.selStart=this.selEnd=null),a=a||"",d=0,e=a.length;e>d;)this.punch(a.charAt(d),b),d+=1;return this},g.punch=function(a,b){var c,d,e,f,g,h,i=this.el,j=this.scope,k=a.toLowerCase(),l=this.attr("ng-model");return b=b||{},"disabled"!==this.attr("disabled")&&(d=this.key[k],e=this.checkShiftKey(a),c=this.createEvent("keydown",{shiftKey:e,keyCode:d}),this.dispatchEvent(i[0],"keydown",c),this.isEditable&&1===a.length&&(f=this.cursorPosition,g=i.val(),g=g.substr(0,f)+a+g.substr(f),l&&j&&j.$eval(l+' = "'+g+'"'),i.val(g),this.cursorPosition+=1),c=this.createEvent("keyup",{shiftKey:e,keyCode:d}),this.dispatchEvent(i[0],"keyup",c),j&&((h=i.data("$ngModelController"))&&h.$setViewValue(i.val()),this.dispatchEvent(i[0],"change",this.createEvent("change",{})),j.$$phase||j.$apply())),this},g.attr=function(a){return this.el.attr(a)||this.el.attr("data-"+a)},g.enter=function(a){return this.punch("enter",a),this},g.left=function(a){this.el;return this.isEditable?this.cursorPosition-=1:this.punch("left",a),this},g.up=function(a){return this.punch("up",a),this},g.right=function(a){this.el;return this.isEditable?this.cursorPosition+=1:this.punch("right",a),this},g.down=function(a){return this.punch("down",a),this},g.home=function(a){this.el;return this.isEditable?this.cursorPosition=0:this.punch("home",a),this},g.end=function(a){var b=this.el;return this.isEditable?this.cursorPosition=b.val().length:this.punch("home",a),this},g.pageUp=function(a){return this.punch("pageup",a),this},g.pageDown=function(a){return this.punch("pagedown",a),this},g.del=function(a){if(this.isEditable){var b=this.el.val(),c=this.cursorPosition;this.el.val(b.substr(0,c)+b.substr(c+1))}else this.punch("delete",a);return this},g.tab=function(a){return this.punch("tab",a),this},g.backspace=function(a){if(this.isEditable){var b=this.el.val(),c=this.cursorPosition;this.el.val(b.substr(0,c-1)+b.substr(c)),this.cursorPosition=c-1}else this.punch("backspace",a);return this},g.capsLock=function(){this.capsLocked=!this.capsLocked},g.lock=function(){var a=ux.runner.locals.$(document);return a.bind("mousedown",this.killEvent),a.bind("keydown",this.killEvent),a.bind("focus",this.killEvent),a.bind("blur",this.killEvent),this},g.release=function(){var a=ux.runner.locals.$(document);return a.unbind("mousedown",this.killEvent),a.unbind("keydown",this.killEvent),a.unbind("focus",this.killEvent),a.unbind("blur",this.killEvent),this},g.killEvent=function(a){a.preventDefault(),a.stopImmediatePropagation()},g.dispatchEvent=function(a,b,c){return a.dispatchEvent?a.dispatchEvent(c):a.fireEvent&&a.fireEvent("on"+b,c),c},g.createEvent=function(a,b){var c,d;if(d=ux.runner.locals.$.extend({bubbles:!0,cancelable:!0,view:window,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},b),ux.runner.locals.$.isFunction(document.createEvent))if(-1!==a.indexOf("key"))try{c=document.createEvent("KeyEvents"),c.initKeyEvent(a,d.bubbles,d.cancelable,d.view,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.keyCode,d.charCode)}catch(e){c=document.createEvent("Events"),c.initEvent(a,d.bubbles,d.cancelable),ux.runner.locals.$.extend(c,{view:d.view,ctrlKey:d.ctrlKey,altKey:d.altKey,shiftKey:d.shiftKey,metaKey:d.metaKey,keyCode:d.keyCode,charCode:d.charCode})}else c=document.createEvent("HTMLEvents"),c.initEvent(a,!1,!0);else document.createEventObject&&(c=document.createEventObject(),ux.runner.locals.$.extend(c,d));return void 0!==ux.runner.locals.$.browser&&(ux.runner.locals.$.browser.msie||ux.runner.locals.$.browser.opera)&&(c.keyCode=d.charCode>0?d.charCode:d.keyCode,c.charCode=void 0),c},ex.elementMethods.push(function(a){a.sendKeys=function(){var b=f.apply(null,arguments);return ex.createElementStep(b,a),b}}),ex.inPageMethods.push(function(){"use strict";var a=this.jQuery?this.jQuery.fn:this.angular.element.prototype,b=this.jQuery||this.angular.element;a.getCursorPosition=function(){return 0===this.length?-1:b(this).getSelectionStart()},a.setCursorPosition=function(a){return 0===this.length?this:b(this).setSelection(a,a)},a.getSelection=function(){if(0===this.length)return-1;var a=b(this).getSelectionStart(),c=b(this).getSelectionEnd();return this[0].value.substring(a,c)},a.getSelectionStart=function(){if(0===this.length)return-1;var a,b=this[0],c=b.value.length;return b.createTextRange?(a=ux.runner.locals.window.document.selection.createRange().duplicate(),a.moveEnd("character",b.value.length),""===a.text&&(c=b.value.length),c=b.value.lastIndexOf(a.text)):void 0!==b.selectionStart&&(c=b.selectionStart),c},a.getSelectionEnd=function(){if(0===this.length)return-1;var a,b=this[0],c=b.value.length;return b.createTextRange?(a=document.selection.createRange().duplicate(),a.moveStart("character",-b.value.length),""===a.text&&(c=b.value.length),c=b.value.lastIndexOf(a.text)):void 0!==b.selectionEnd&&(c=b.selectionEnd),c},a.setSelection=function(a,b){if(0===this.length)return this;var c=this[0];if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",a),d.select()}else c.setSelectionRange&&(c.focus(),c.setSelectionRange(a,b));return this}}),ex.elementMethods.push(function(a){function b(a){if(a.click)a.click();else if(document.createEvent){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);{a.dispatchEvent(b)}}}a.sendMouse=function(a,c){var d,e=ex.createElementStep({label:"sendMouse",method:function(){return this.element[0].href&&this.element[0].href.length&&b(this.element[0]),e}},this);return c=c?"."+c:"",d=e.trigger("mousedown"+c),a&&(d=d.focus()),d.trigger("mouseup"+c).trigger("click"+c)}}),ex.elementMethods.push(function(a){function b(a){if(a.click)a.click();else if(document.createEvent){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);{a.dispatchEvent(b)}}}a.sendTap=function(a,c){var d,e=ex.createElementStep({label:"sendTap",method:function(){return this.element[0].href&&this.element[0].href.length&&b(this.element[0]),e}},this);return c=c?"."+c:"",d=e.trigger("touchstart"+c),a&&(d=d.focus()),d.trigger("touchend"+c).trigger("touchcancel"+c).trigger("click"+c)}}),ex.elementMethods.push(function(a){a.toBe=function(b){var c={label:"toBe "+b,value:void 0,timeout:ex.locals.options.interval,method:function(){},validate:function(){var d=$.trim(a.value)===b;return c.label=d?'toBe "'+b+'"':'expected "'+a.value+'" to be "'+b+'"',d}};return ex.createElementStep(c,a)}}),function(){"use strict";try{angular.module("ux")}catch(a){angular.module("ux",[])}angular.module("ux").run(function(){ex.getInjector=function(){return ex.options.window?ex.options.window.angular.element(ex.options.rootElement).injector():angular.element(ex.options.window.document).injector()}}).factory("runner",function(){return ux.runner.options.autoStart&&"boolean"==typeof ux.runner.options.autoStart&&ux.runner.run(),ux.runner})}()}(this.ux=this.ux||{},function(){return this}());