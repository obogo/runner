/*
* goRunner v.0.0.1
* (c) 2014, Obogo
* License: Obogo 2014. All Rights Reserved.
*/
!function(a){"use strict";function b(c){for(var d,e,f=a.util.array.toArray(arguments),g=1,h=f.length,i=this||{};h>g;){d=f[g];for(e in d)d.hasOwnProperty(e)&&(c[e]&&"object"==typeof c[e]?c[e]=b.apply(i,[c[e],d[e]]):d[e]instanceof Array?(c[e]=c[e]||(i&&i.arrayAsObject?{length:d[e].length}:[]),d[e].length&&(c[e]=b.apply(i,[c[e],d[e]]))):d[e]&&"object"==typeof d[e]?(i.objectsAsArray&&"number"==typeof d[e].length&&(c[e]instanceof Array||(c[e]=[])),c[e]=b.apply(i,[c[e]||{},d[e]])):c[e]=d[e]);g+=1}return c}function c(b,c){var d,e,f,g=0;if(arguments.length>2&&(f=a.util.array.toArray(arguments),f.splice(0,2)),b&&b.length)for(d=b.length;d>g;){if(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e)return e;g+=1}else if(!(b instanceof Array))for(g in b)if(b.hasOwnProperty(g)&&(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e))return e;return b}function d(a){var b=[],c=0,d=a.length;if(void 0!==a.length)for(;d>c;)b.push(a[c]),c+=1;else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function e(a,b){var c,d,e,f,g;for(b||(b=function(a,b){return a>b?1:b>a?-1:0}),d=a.length,f=d-1,c=0;d>c;c+=1)for(e=0;f>e;e+=1)b(a[e],a[e+1])>0&&(g=a[e+1],a[e+1]=a[e],a[e]=g);return a}function f(a,b){this.name=a,this.style=b}function g(a){var b;return b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),b.open("GET",a,!1),b.send(null),b.responseText}function h(a){function b(){void 0===a.escapeMode&&(a.escapeMode=!0),a.attributePrefix=a.attributePrefix||"_",a.arrayAccessForm=a.arrayAccessForm||"none",a.emptyNodeForm=a.emptyNodeForm||"text",void 0===a.enableToStringFunc&&(a.enableToStringFunc=!0),a.arrayAccessFormPaths=a.arrayAccessFormPaths||[],void 0===a.skipEmptyTextNodesForObj&&(a.skipEmptyTextNodesForObj=!0),void 0===a.stripWhitespaces&&(a.stripWhitespaces=!0),a.datetimeAccessFormPaths=a.datetimeAccessFormPaths||[]}function c(){function a(a){var b=String(a);return 1===b.length&&(b="0"+b),b}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}function d(a){var b=a.localName;return null==b&&(b=a.baseName),(null==b||""==b)&&(b=a.nodeName),b}function e(a){return a.prefix}function f(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):a}function g(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function h(b,c,d){switch(a.arrayAccessForm){case"property":b[c+"_asArray"]=b[c]instanceof Array?b[c]:[b[c]]}if(!(b[c]instanceof Array)&&a.arrayAccessFormPaths.length>0){for(var e=0;e<a.arrayAccessFormPaths.length;e++){var f=a.arrayAccessFormPaths[e];if("string"==typeof f){if(f==d)break}else if(f instanceof RegExp){if(f.test(d))break}else if("function"==typeof f&&f(b,c,d))break}e!=a.arrayAccessFormPaths.length&&(b[c]=[b[c]])}}function i(a){var b=a.split(/[-T:+Z]/g),c=new Date(b[0],b[1]-1,b[2]),d=b[5].split(".");if(c.setHours(b[3],b[4],d[0]),d.length>1&&c.setMilliseconds(d[1]),b[6]&&b[7]){var e=60*b[6]+Number(b[7]),f=/\d\d-\d\d:\d\d$/.test(a)?"-":"+";e=0+("-"==f?-1*e:e),c.setMinutes(c.getMinutes()-e-c.getTimezoneOffset())}else-1!==a.indexOf("Z",a.length-1)&&(c=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())));return c}function j(b,c,d){if(a.datetimeAccessFormPaths.length>0){for(var e=d.split(".#")[0],f=0;f<a.datetimeAccessFormPaths.length;f++){var g=a.datetimeAccessFormPaths[f];if("string"==typeof g){if(g==e)break}else if(g instanceof RegExp){if(g.test(e))break}else if("function"==typeof g&&g(obj,c,e))break}return f!=a.datetimeAccessFormPaths.length?i(b):b}return b}function k(b,c){if(b.nodeType==w.DOCUMENT_NODE){for(var f=new Object,i=b.childNodes,l=0;l<i.length;l++){var m=i.item(l);if(m.nodeType==w.ELEMENT_NODE){var n=d(m);f[n]=k(m,n)}}return f}if(b.nodeType==w.ELEMENT_NODE){var f=new Object;f.__cnt=0;for(var i=b.childNodes,l=0;l<i.length;l++){var m=i.item(l),n=d(m);m.nodeType!=w.COMMENT_NODE&&(f.__cnt++,null==f[n]?(f[n]=k(m,c+"."+n),h(f,n,c+"."+n)):(null!=f[n]&&(f[n]instanceof Array||(f[n]=[f[n]],h(f,n,c+"."+n))),f[n][f[n].length]=k(m,c+"."+n)))}for(var o=0;o<b.attributes.length;o++){var p=b.attributes.item(o);f.__cnt++,f[a.attributePrefix+p.name]=p.value}var q=e(b);return null!=q&&""!=q&&(f.__cnt++,f.__prefix=q),null!=f["#text"]&&(f.__text=f["#text"],f.__text instanceof Array&&(f.__text=f.__text.join("\n")),a.escapeMode&&(f.__text=g(f.__text)),a.stripWhitespaces&&(f.__text=f.__text.trim()),delete f["#text"],"property"==a.arrayAccessForm&&delete f["#text_asArray"],f.__text=j(f.__text,n,c+"."+n)),null!=f["#cdata-section"]&&(f.__cdata=f["#cdata-section"],delete f["#cdata-section"],"property"==a.arrayAccessForm&&delete f["#cdata-section_asArray"]),1==f.__cnt&&null!=f.__text?f=f.__text:0==f.__cnt&&"text"==a.emptyNodeForm?f="":f.__cnt>1&&null!=f.__text&&a.skipEmptyTextNodesForObj&&(a.stripWhitespaces&&""==f.__text||""==f.__text.trim())&&delete f.__text,delete f.__cnt,!a.enableToStringFunc||null==f.__text&&null==f.__cdata||(f.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),f}return b.nodeType==w.TEXT_NODE||b.nodeType==w.CDATA_SECTION_NODE?b.nodeValue:void 0}function l(b,c,d,e){var g="<"+(null!=b&&null!=b.__prefix?b.__prefix+":":"")+c;if(null!=d)for(var h=0;h<d.length;h++){var i=d[h],j=b[i];a.escapeMode&&(j=f(j)),g+=" "+i.substr(a.attributePrefix.length)+"='"+j+"'"}return g+=e?"/>":">"}function m(a,b){return"</"+(null!=a.__prefix?a.__prefix+":":"")+b+">"}function n(a,b){return-1!==a.indexOf(b,a.length-b.length)}function o(b,c){return"property"==a.arrayAccessForm&&n(c.toString(),"_asArray")||0==c.toString().indexOf(a.attributePrefix)||0==c.toString().indexOf("__")||b[c]instanceof Function?!0:!1}function p(a){var b=0;if(a instanceof Object)for(var c in a)o(a,c)||b++;return b}function q(b){var c=[];if(b instanceof Object)for(var d in b)-1==d.toString().indexOf("__")&&0==d.toString().indexOf(a.attributePrefix)&&c.push(d);return c}function r(b){var c="";return null!=b.__cdata&&(c+="<![CDATA["+b.__cdata+"]]>"),null!=b.__text&&(c+=a.escapeMode?f(b.__text):b.__text),c}function s(b){var c="";return b instanceof Object?c+=r(b):null!=b&&(c+=a.escapeMode?f(b):b),c}function t(a,b,c){var d="";if(0==a.length)d+=l(a,b,c,!0);else for(var e=0;e<a.length;e++)d+=l(a[e],b,q(a[e]),!1),d+=u(a[e]),d+=m(a[e],b);return d}function u(a){var b="",c=p(a);if(c>0)for(var d in a)if(!o(a,d)){var e=a[d],f=q(e);if(null==e||void 0==e)b+=l(e,d,f,!0);else if(e instanceof Object)if(e instanceof Array)b+=t(e,d,f);else if(e instanceof Date)b+=l(e,d,f,!1),b+=e.toISOString(),b+=m(e,d);else{var g=p(e);g>0||null!=e.__text||null!=e.__cdata?(b+=l(e,d,f,!1),b+=u(e),b+=m(e,d)):b+=l(e,d,f,!0)}else b+=l(e,d,f,!1),b+=s(e),b+=m(e,d)}return b+=s(a)}var v="1.1.5";a=a||{},b(),c();var w={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(a){var b=window.ActiveXObject||"ActiveXObject"in window;if(void 0===a)return null;var c;if(window.DOMParser){var d=new window.DOMParser,e=null;if(!b)try{e=d.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(f){e=null}try{c=d.parseFromString(a,"text/xml"),null!=e&&c.getElementsByTagNameNS(e,"parsererror").length>0&&(c=null)}catch(f){c=null}}else 0==a.indexOf("<?")&&(a=a.substr(a.indexOf("?>")+2)),c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a);return c},this.asArray=function(a){return a instanceof Array?a:[a]},this.toXmlDateTime=function(a){return a instanceof Date?a.toISOString():"number"==typeof a?new Date(a).toISOString():null},this.asDateTime=function(a){return"string"==typeof a?i(a):a},this.xml2json=function(a){return k(a)},this.xml_str2json=function(a){var b=this.parseXmlString(a);return null!=b?this.xml2json(b):null},this.json2xml_str=function(a){return u(a)},this.json2xml=function(a){var b=this.json2xml_str(a);return this.parseXmlString(b)},this.getVersion=function(){return v}}{var i=a.runnerAdmin=a.runnerAdmin||{},j=window;j.document}a.extend=b,a.each=c,a.util=a.util||{},a.util.array=a.util.array||{},a.util.array.toArray=d,a.util.array.sort=e,a.charPack=function(a,b){for(var c="";c.length<b;)c+=a;return c},f.prototype.log=function(b){var c,d,e=a.util.array.toArray(arguments);b&&b.uid&&(c=b.uid.split(".").length,d=a.charPack("	",c)+b.uid+":"+b.type+":"+b.status+":"+b.state+":["+b.progress+"]::",e.shift(),e[0]=d+e[0]),this.applyName(e),this.applyStyle(e),this.output.apply(console,e)},f.prototype.applyName=function(a){var b=a[0];if(this.name){var c=0;if("string"==typeof b&&"	"===b.charAt(c)){for(;"	"===b.charAt(c);)c+=1;if(c)return b=b.substr(0,c)+this.name+"::"+b.substr(c),void(a[0]=b)}b=this.name+"::"+b,a[0]=b}},f.prototype.applyStyle=function(a){this.style&&(a[0]="%c"+a[0],a.splice(1,0,this.style))},f.prototype.output=window.console&&window.console.log;{var k;new f}!function(){function a(){return c.pop()||[]}function b(a){a.length=0,c.length<d&&c.push(a)}var c=[],d=40,e=function(a,b,c){var d,e=a,g=e;if(!e)return g;if(!f[typeof e])return g;b=b&&"undefined"==typeof c?b:baseCreateCallback(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return g;return g};if(window._)k=window._;else{Array.prototype.isArray=!0,k={},k.extend=function(a,b){a=a||{};for(var c in b)b.hasOwnProperty(c)&&(a[c]="object"==typeof b[c]?k.extend(a[c],b[c]):b[c]);return a},k.isString=function(a){return"string"==typeof a},k.isBoolean=function(a){return"boolean"==typeof a},k.isNumber=function(a){return"number"==typeof a},k.isArray=function(a){return a?!!a.isArray:!1},k.isEmpty=function(a){if(k.isString(a))return""===a;if(k.isArray(a))return 0===a.length;if(k.isObject(a)){for(var b in a)return!1;return!0}return!1},k.isUndefined=function(a){return"undefined"==typeof a},k.isFunction=function(a){return"function"==typeof a},k.isObject=function(a){return"object"==typeof a},k.isDate=function(a){return a instanceof Date};var f={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},g="[object Arguments]",h="[object Array]",i="[object Boolean]",j="[object Date]",l="[object Number]",m="[object Object]",n="[object RegExp]",o="[object String]";k.isEqual=function p(c,d,k,q,r,s){if(k){var t=k(c,d);if("undefined"!=typeof t)return!!t}if(c===d)return 0!==c||1/c==1/d;var u=typeof c,v=typeof d;if(!(c!==c||c&&f[u]||d&&f[v]))return!1;if(null==c||null==d)return c===d;var w=toString.call(c),x=toString.call(d);if(w==g&&(w=m),x==g&&(x=m),w!=x)return!1;switch(w){case i:case j:return+c==+d;case l:return c!=+c?d!=+d:0==c?1/c==1/d:c==+d;case n:case o:return c==String(d)}var y=w==h;if(!y){var z=hasOwnProperty.call(c,"__wrapped__"),A=hasOwnProperty.call(d,"__wrapped__");if(z||A)return p(z?c.__wrapped__:c,A?d.__wrapped__:d,k,q,r,s);if(w!=m)return!1;var B=c.constructor,C=d.constructor;if(B!=C&&!(isFunction(B)&&B instanceof B&&isFunction(C)&&C instanceof C)&&"constructor"in c&&"constructor"in d)return!1}var D=!r;r||(r=a()),s||(s=a());for(var E=r.length;E--;)if(r[E]==c)return s[E]==d;var F=0;if(t=!0,r.push(c),s.push(d),y){if(E=c.length,F=d.length,t=F==E,t||q)for(;F--;){var G=E,H=d[F];if(q)for(;G--&&!(t=p(c[G],H,k,q,r,s)););else if(!(t=p(c[F],H,k,q,r,s)))break}}else e(d,function(a,b,d){return hasOwnProperty.call(d,b)?(F++,t=hasOwnProperty.call(c,b)&&p(c[b],a,k,q,r,s)):void 0}),t&&!q&&e(c,function(a,b,c){return hasOwnProperty.call(c,b)?t=--F>-1:void 0});return r.pop(),s.pop(),D&&(b(r),b(s)),t}}}(),i.events=i.events||{},a.extend(i.events,{admin:{START:"runner:start",STOP:"runner:stop",UPDATE:"runner:update",RESET:"runner:reset",DONE:"runner:done",START_RECORDING:"runner:startRecording",STOP_RECORDING:"runner:stopRecording",LOAD_TEST:"runner:loadTest",REGISTER_SCENARIO:"runner:registerScenario"},runner:{ON_START:"runner:onStart",ON_STOP:"runner:onStop",ON_UPDATE:"runner:onUpdate",ON_RESET:"runner:onReset",ON_DONE:"runner:onDone",ON_START_RECORDING:"runner:onStartRecording",ON_STOP_RECORDING:"runner:onStopRecording",ON_LOAD_TEST:"runner:onLoadTest",ON_REGISTER_SCENARIO:"runner:onRegisterScenario"}});var l,m=angular.module("admin",["ux"]).run(["$rootScope",function(a){l=a}]),n={};m.controller("myController",function(a){a.sampleData={events:[],root:{}};new h;go.each(i.events.runner,function(b){a.$on(b,function(){var b=go.util.array.toArray(arguments);b[0]=b[0].name,k.extend(n,arguments[1]),a.sampleData.root?go.extend(a.sampleData.root,n):a.sampleData.root=n,a.sampleData.events.push(b)})}),a.parseXML=function(){var c=go.runnerAdmin.xml.parse(a.xmlData);return console.log(c),b.apply({arrayAsObject:!0},[{},c])},a.sendTest=function(){a.$emit(i.events.admin.LOAD_TEST,a.parseXML()),a.xmlData=""},a.registerScenario=function(){a.$emit(i.events.admin.REGISTER_SCENARIO,a.parseXML()),a.xmlData=""},a.setScenarioXML=function(){a.xmlData=g("xml/registerScenarioSimple.xml")},a.setSimpleXML=function(){a.xmlData=g("xml/simple.xml")},a.start=function(){a.$emit(i.events.admin.START,a.startNode)},a.stop=function(){a.$emit(i.events.admin.STOP)},a.reset=function(){a.$emit(i.events.admin.RESET)}}),function(){function b(a){return"true"===a||"false"===a?"true"===a:""!==a&&a&&!isNaN(a)?parseFloat(a):a}function c(a){if("condition"===a.type){a.conditions=[];for(var b=0,e=a.steps.length;e>b;)d.each(a.steps,c),a.conditions.push(a.steps[b]),b+=1;a.steps=[]}}var d={extend:a.extend,each:a.each,isArray:k.isArray};d.extend(d,{parse:function(a){var b;return a=this.closeOpenNodes(a),a=a.replace(/<(\w+)/g,'<steps type="$1"'),a=a.replace(/<\/\w+/g,"</steps"),b=this.xml2json(a),this.each(b.steps,c),b},closeOpenNodes:function(a){return a=a.replace(/<(\w+)\/>/gim,"<$1></$1>"),a=a.replace(/(<(\w+)[^>]+?)\/>/gim,"$1></$2>")},xml2json:function(a,c){function e(a,h){if(!a)return null;{var i,j="",k=null,l=null;a.nodeType,f(a.localName||a.nodeName),a.text||a.nodeValue||""}a.childNodes&&a.childNodes.length>0&&d.each(a.childNodes,function(a){var b=a.nodeType,c=f(a.localName||a.nodeName),d=a.text||a.nodeValue||"";if(8!==b)if(3!==b&&4!==b&&c)k=k||{},k[c]?(k[c].length||(k[c]=g(k[c])),k[c]=g(k[c]),k[c][k[c].length]=e(a,!0),k[c].length=k[c].length):k[c]=e(a);else{if(d.match(/^\s+$/))return;j+=d.replace(/^\s+/,"").replace(/\s+$/,"")}}),j&&(j=b(j)),a.attributes&&a.attributes.length>0&&(l={},k=k||{},d.each(a.attributes,function(a){var c=f(a.name),d=a.value;"xmlns"!==c&&(l[c]=d,k[c]?(k[i]=g(k[i]),k[c][k[c].length]=d,k[c].length=k[c].length):k[c]=b(d))})),k&&(""===j&&(k=d.extend({},k||{})),j=k.text?"object"==typeof k.text?k.text:k.txt||j||"":j,void 0!==j&&""!==j&&(k.text=j),j="");var m=k||j;return c&&(j&&(m={}),j=m.text||j||"",j&&(m.text=j),h||(m=g(m))),m}if(!a)return{};var f=function(a){return String(a||"").replace(/-/g,"_")},g=function(a){return d.isArray(a)||(a=[a]),a.length=a.length,a};if("string"==typeof a&&(a=d.text2xml(a)),a.nodeType){if(3===a.nodeType||4===a.nodeType)return a.nodeValue;var h=9===a.nodeType?a.documentElement:a,i=e(h,!0);return a=null,h=null,i}},text2xml:function(a){var b,c;try{c=DOMParser?new DOMParser:new ActiveXObject("Microsoft.XMLDOM"),c.async=!1}catch(d){throw new Error("XML Parser could not be instantiated")}try{b=DOMParser?c.parseFromString(a,"text/xml"):c.loadXML(a)?c:!1}catch(d){throw new Error("Error parsing XML string")}return b}}),i.xml=d}();var o={config:{GOINSTANT_URL:"https://goinstant.net/0fc17c9b2a8f/runner-dev"},events:{ON_USER_READY:"onUserReady",ON_CONNECTION_SUCCESS:"onConnectionSuccess",ON_CONNECTION_ERROR:"onConnectionError",ON_TRACK_CONNECTION_SUCCESS:"onTrackConnectionSuccess",ON_TRACK_CONNECTION_ERROR:"onTrackConnectionError"}},p={name:"ProjectA"},q={displayName:"Admin Panel",isAdmin:!0,visible:!1,ua:navigator.userAgent,tracks:{},scenarios:{}},r={};!function(){var a={},b=new f("serviceConst","color:#FF0099");o.on=function(c,d){b.log("on %s",c);var e=a[c];"undefined"==typeof e&&(e=a[c]=[]),e.push(d)},o.dispatch=function(c,d,e){b.log("dispatch %s",c);var f,g=a[c],h=0;if("undefined"!=typeof g)for(d=d instanceof Array?d:[d],e=e||o,f=g.length;f>h;)g[h].apply(e,d),h+=1}}(),function(){function a(){i.log("init"),o.on(o.events.ON_USER_READY,c)}function b(){i.log("connect"),h.isConnected=!1,e=new goinstant.Connection(o.config.GOINSTANT_URL),e.connect(g,d)}function c(a){i.log("onUserReady"),g=a,b()}function d(a){return i.log("onConnection"),a?(h.isConnected=!1,o.dispatch(o.events.ON_CONNECTION_ERROR,a)):(h.isConnected=!0,void o.dispatch(o.events.ON_CONNECTION_SUCCESS,e))}var e,g,h=this||{},i=new f("socketService","color:#FF00FF");h.isConnected=!1,a()}(),function(){function a(){h.log("init"),o.on(o.events.ON_USER_READY,b),o.on(o.events.ON_PROJECT_READY,d),o.on(o.events.ON_CONNECTION_SUCCESS,c)}function b(a){h.log("onUserRead"),e=a}function c(a){h.log("onConnectionSuccess"),g=a.room(e.name),g.join().then(function(a){o.dispatch(o.events.ON_TRACK_CONNECTION_SUCCESS,a.room)},function(a){h.log("	ERROR: %o",a),o.dispatch(o.events.ON_TRACK_CONNECTION_ERROR,a)})}function d(a){h.log("onProjectReady %o",a),e=a}var e,g,h=new f("trackRoomService","color:#9900FF");a()}(),function(){function b(b){function d(d){var e=d.id.split(":").pop(),f=b.channel(e);c.log("connected on chanel %s",e),f.on("message",function(b){c.log("message received from %s",d.id);var e=a.util.array.toArray(b);l.$broadcast.apply(l,e)})}function e(a){var d="/.users/"+a.id+"/progress";b.key(d).on("set",function(a){c.log("	console update %s",a.percent)})}function f(a){a.isAdmin||r[a.id]||(c.log("	User Joined %s",a.displayName),r[a.id]=a,d(a),e(a))}function g(a){r[a.id]&&(b.channel(a.id).off("message"),delete r[a.id],c.log("	User Left %s",a.displayName))}function h(){var b=a.util.array.toArray(arguments);a.each(r,j,b)}function j(d,e,f,g){g[0]=g[0].name;var h=d.id.split(":").pop(),i=b.channel(h),j=a.extend.apply({arrayAsObject:!0},[{},g]);c.log("	sendToDevice on channel %s %o",h,j),i.message.apply(i,[j])}function k(a,b){l.$on(a,b)}function m(b,c){a.each(r,n,c)}function n(a,d,e,f){var g="/.users/"+a.id+"/track";b.key(g).set(f,function(a){a&&c.log(a)})}function o(b,c){a.each(r,p,c)}function p(a,d,e,f){var g="/.users/"+a.id+"/scenarios";b.key(g).set(f,function(a){a&&c.log(a)})}c.log("Track connected"),b.users.get(function(b,d){c.log("TrackUsers.get() %o",d),a.each(d,f)}),b.on("join",f),b.on("leave",g),b.channel("public").on("message",function(a,b){c.log("message received on PUBLIC",a,b)}),k(i.events.admin.START,h),k(i.events.admin.STOP,h),k(i.events.admin.RESET,h),k(i.events.admin.START_RECORDING,h),k(i.events.admin.STOP_RECORDING,h),k(i.events.admin.LOAD_TEST,m),k(i.events.admin.REGISTER_SCENARIO,o)}var c=new f("trackRoomListeners","color:#6633FF");o.on(o.events.ON_TRACK_CONNECTION_SUCCESS,b),c.log("what is ua",navigator.userAgent),o.dispatch(o.events.ON_USER_READY,q),o.dispatch(o.events.ON_PROJECT_READY,p)}()}(this.go=this.go||{},function(){return this}());