/*
* goRunner v.0.0.1
* (c) 2014, Obogo
* License: Obogo 2014. All Rights Reserved.
*/
!function(a){"use strict";function b(a,b,c){function d(a,b){var c,d;d=h[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return h[a]=h[a]||[],h[a].push(b),function(){d(a,b)}}function f(b,c){return b&&b.apply(a,c)}function g(a){if(h[a])for(var b=0,c=h[a],d=c.length;d>b;)f(c[b],arguments),b+=1}var h={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.dispatch=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.dispatch=g)}function c(a){var b=[],c=0,d=a.length;if(void 0!==a.length)for(;d>c;)b.push(a[c]),c+=1;else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function d(a,b){var c,d,e,f,g;for(b||(b=function(a,b){return a>b?1:b>a?-1:0}),d=a.length,f=d-1,c=0;d>c;c+=1)for(e=0;f>e;e+=1)b(a[e],a[e+1])>0&&(g=a[e+1],a[e+1]=a[e],a[e]=g);return a}function e(b,c){var d,e,f,g=0;if(arguments.length>2&&(f=a.util.array.toArray(arguments),f.splice(0,2)),b&&b.length)for(d=b.length;d>g;){if(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e)return e;g+=1}else if(!(b instanceof Array))for(g in b)if(b.hasOwnProperty(g)&&(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e))return e;return b}function f(b){for(var c,d,e=a.util.array.toArray(arguments),g=1,h=e.length;h>g;){c=e[g];for(d in c)b[d]=b[d]&&"object"==typeof b[d]?f(b[d],c[d]):c[d]instanceof Array?f(b[d]||[],c[d]):c[d]&&"object"==typeof c[d]?f(b[d]||{},c[d]):c[d];g+=1}return b}function g(a){this.dispatcher=a}function h(){function b(a){G=H=a}function c(b){var c=H;a.each(b,function(a){q.log(c,"%s.childIndex = %s",c.label,a),a=parseInt(a,10),c.childIndex=a,c=c[u][a],K.push(a),G=c,G.state=t.ENTERING}),q.log(c,"values %s",K.join("."))}function d(a){return a?K.slice(0,a):K}function e(){return G}function f(){return K.length}function g(){return G||(i(H),q.log("	%cRoot Start: %s","color:#F90",G.label)),j()||l()||k()?void(G.status===s.SKIP&&g()):G===H?void q.log(G,"%cROOT: %s","color:#F90",G.label):void g()}function h(a){var b=a.uid.split("."),c=0,d=b.length-1;for(b.shift();d>c;)b[c]=parseInt(b[c],10),c+=1;return b}function i(a){var b,c=h(a),d=0,e=c.length;for(b=m(c,0,H,-1),b&&(b.childIndex=c[e-1]||0),K.length=0;e>d;)K[d]=c[d],d+=1;G=a,G.state=t.ENTERING}function j(){var a=G[u].length;return G.status===s.SKIP||G.childIndex>=a?!1:a&&G.childIndex+1<a?(i(G[u][G.childIndex+1]),q.log(G,"%cgetNextChild: %s","color:#F90",G.label),!0):(G.childrenComplete=!0,!1)}function k(){var a=m(K,0,H,-1);return a?(i(a),q.log(G,"%cgetParent: %s","color:#F90",G.label),!0):!1}function l(){var a,b=K.length-1;return K[b]+=1,a=m(K,0,H,0),a?(i(a),q.log(G,"%cgetNextSibling: %s","color:#F90",G.label),!0):k()}function m(a,b,c,d){c=c||H,b=b||0,d=d||0;var e=a[b];return b>=a.length+d?c:void 0!==e&&c[u][e]?(c=c[u][e],m(a,b+1,c,d)):null}function n(a){var b=h(a);return b.length?m(b,0,H,-1):H}function o(){var a=[];return p(H,null,null,a),a}function p(b,c,d,e){b.status===s.SKIP&&a.each(b[u],C),a.each(b[u],p,e),y(b,e)}function v(a){return a.status===s.PASS?1:a.time>a.maxTime?1:a.time/a.maxTime}function w(a,b){if(b=b||I&&I.slice()||[],a=a||e()){I&&(I=null),y(a,b);var c=n(a);return c&&c!==a&&w(c,b),b}}function x(a){I=w(a)}function y(a,b){var c,d,e=0;if(a.status===s.SKIP)return void(a.progress=0);if(a.state===t.COMPLETE)a.progress=1;else if(c=a[u].length,c&&-1!==a.childIndex){for(d=0,a.skipCount=0;e<=a.childIndex&&c>e;)a[u][e].status!=s.SKIP?d+=a[u][e].progress:a.skipCount+=1,e+=1;d+=v(a),a.progress=d/(c-a.skipCount+(a.type!==r.ROOT?1:0))}else a.progress=v(a);b.push(a)}function z(){if(G.type===r.IF||G.type===r.ELSEIF||G.type===r.ELSE){var a=m(K,0,H,-1);(G.type===r.ELSEIF||G.type===r.ELSE)&&A(a),(G.type===r.IF||G.type===r.ELSEIF)&&B(a)}}function A(a){for(var b=a.childIndex-1,c=0;b>=c;){var d=a[u][b];if(d.type!==r.IF&&d.type!==r.ELSEIF)break;C(d),b-=1}}function B(a){for(var b=a.childIndex+1,c=a[u].length;c>b;){var d=a[u][b];if(d.type!==r.ELSEIF&&d.type!==r.ELSE)break;C(d),b+=1}}function C(a){a.status!==s.SKIP&&(q.log(a,"%cSKIP %s","color:#FF6600",a.uid),a.status=s.SKIP,x(a))}function D(a){return a.type===r.IF||a.type===r.ELSEIF||a.type===r.ELSE}function E(){var a=F(H),b=a.complete?a.time/a.complete:0,c=a.total*b;return a.totalTime>c&&(c=a.totalTime),Math.ceil(.001*(c-a.time))}function F(a){for(var b,c=0,d=0,e=0,f=0,g=0,h=a[u].length;h>g;)a[u].length&&(b=F(a[u][g]),c+=b.complete,d+=b.total,e+=b.time,f+=b.totalTime),c+=a.state===t.COMPLETE?1:0,d+=1,e+=a.time,f+=a.time||2*a.increment,g+=1;return{complete:c,total:d,time:e,totalTime:f}}var G,H,I,J,K=[];this.setData=b,this.setPath=c,this.getDepth=f,this.next=function(){return J=e(),g()},this.getLastStep=function(){return J},this.getSelected=e,this.getPath=d,this.getProgressChanges=w,this.getAllProgress=o,this.skipBlock=z,this.isCondition=D,this.getTime=E,this.getParent=n}function i(b,c,d,e){function f(a){var b=Date.now(),c=l+e;clearTimeout(j),a&&(console.log("%c%s","color:#009900;",a),i=a),b>c?(l=b,g()):j=setTimeout(f,c-b)}function g(){var e,f,g=d.getPath().join(".");c.activePath="R"+(g&&"."+g||""),d.getProgressChanges(),e=m(c),f=a.data.diff(h,e),h=e,b.dispatch(i,f)}var h,i,j,k={},l=0;return e=e||0,k.throttle=e,k.fire=f,k}function j(a,b,c,d){if(x[a])throw new Error(a+" is already registered");r[a.toUpperCase()]=a,x[a]=b,g.prototype[a]=c,d&&(g.prototype[a+w]=d)}function k(c){function d(){return O[u]}function e(a){J=a,f()}function f(){p(),k(J),G(O),O.timeLeft=M.getTime(),H(v.RESET)}function k(b){var c=a.each(b.slice(),l,K);O[u]=c,q.log(O,""),M.setData(O)}function n(a){N.async||(I=1),M.setPath(a?"string"==typeof a?a.split("."):a:[0]),q.log(M.getSelected(),"start %s",M.getSelected().label),H(v.START),y()}function p(){I&&(clearTimeout(I),I=0,H(v.STOP))}function x(){activeStep?(activeStep.time=0,z()):n()}function y(){N.async?(clearTimeout(I),I=setTimeout(z,M.getSelected().increment)):z()}function z(){var a=M.getSelected();q.log(a,"run %s state:%s",a.label,a.state),G(a),M.isCondition(a)?a.status===s.SKIP?(a.progress=0,A()):a.state===t.COMPLETE?A():a.status!==s.PASS?D(a,C(a)):a[u].length&&a.childIndex<a[u].length-1?A():B(a)?(a.state=t.COMPLETE,E(a)):F(a):a[u].length&&-1===a.childIndex?M.next():a.state===t.COMPLETE?E(a):B(a)?F(a):D(a,C(a)),I&&(G(a),H(v.UPDATE),y())}function A(){G(M.getSelected()),M.next(),H()}function B(a){return a.execCount*a.increment>a.maxTime}function C(a){var b;if(g.prototype[a.type+w]){if(b=g.prototype[a.type+w](a))return b;throw new Error('Dependency Failure: "'+a+'" unable to fetch dependency.')}}function D(a,b){a.state=t.RUNNING,q.log(a,"run method %s",a.type),a.status=L[a.type](a,b),a.execCount+=1,a.status===s.PASS?(a.state=t.COMPLETE,M.skipBlock(),q.log(a,"pass %s",a.label),a.type===r.ROOT&&(c.stop(),H(v.DONE))):B(a)&&F(a)}function E(a){return q.log(a,"complete %s",a.label),a.type===r.ROOT?void c.stop():void A()}function F(a){q.log(M.getSelected(),"run expired"),G(a),q.log(M.getSelected(),"expired %s %s/%s",a.label,a.time,a.maxTime),a.status=M.isCondition(a)?s.SKIP:s.TIMED_OUT,a.state=t.COMPLETE}function G(a){var b=Date.now();a.startTime||(a.startTime=b),a.time=b-a.startTime,q.log(M.getSelected(),"updateTime %s %s/%s",a.label,a.time,a.maxTime)}function H(a){P.fire(a)}b(c);var I,J,K="R",L=new g(c),M=new h,N={async:!0},O=l({uid:K,label:r.ROOT,type:r.ROOT,index:-1,maxTime:100}),P=i(c,O,M,1e3);return c.types=r,c.states=t,c.statuses=s,c.register=j,c.start=n,c.stop=p,c.resume=x,c.reset=f,c.getSteps=d,c.setSteps=e,c.getParent=M.getParent,c.getParentOfType=function(a,b){for(var c=o.getParent(a);c.type!==b&&c.type!==r.ROOT;)c=o.getParent(c);return c.type===b?c:null},c.getPrevSibling=function(a){var b=c.getParent(a),d=b[u][a.index-1];return d},c.getNextSibling=function(a){var b=c.getParent(a),d=b[u][a.index+1];return d},c.getRoot=function(){return c.exportRoot=c.exportRoot||{},m(O,null,c.exportRoot),c.exportRoot},c.getCurrentStep=function(){return M.getSelected()},c.getLastStep=function(){return M.getLastStep()},c}function l(b,c,d,e){console.log("	step %s",b.label),e=e||"";var f,g,h,i=(e?e+".":"")+(void 0!==c?c:"R"),j={};if(j.uid=i,j.index=c,j.type=j.type||r.STEP,h=b[u],a.extend(j,x[r.STEP],x[b.type]||{},b),d&&(d[c]=j),h&&h.length)for(f=0,g=j[u].length,j[u]=[];g>f;)l(h[f],f,j[u],i),f+=1;else j[u]=[];return d?void 0:j}function m(a,b,c){return n(a,null,null,null,b?z:y,c)}function n(b,c,d,e,f,g){g=g||{};var h,i;if(h=x[b.type],!h)throw new Error('Unsupported step type "'+b.type+'"');for(i in b)if(f[i]);else if(b[i]&&b[i].isArray)g[i]={length:b[i].length},b[i].length&&a.each(b[i],n,g[i],f);else if(b.hasOwnProperty(i)&&h[i]!==b[i]){if("number"==typeof b[i]&&isNaN(b[i]))throw new Error("Export NaN failure.");g[i]=b[i]}return e?void(e[c]=g):g}var o=a.runner=a.runner||{};o.events={START:"runner:start",STOP:"runner:stop",UPDATE:"runner:update",RESET:"runner:reset",DONE:"runner:done",START_RECORDING:"runner:startRecording",STOP_RECORDING:"runner:stopRecording"},a.util=a.util||{},a.util.array=a.util.array||{},a.util.array.toArray=c,a.util.array.sort=d,a.each=e,a.extend=f;var p;!function(){function a(){return c.pop()||[]}function b(a){a.length=0,c.length<d&&c.push(a)}var c=[],d=40;if(window._)p=window._;else{Array.prototype.isArray=!0,p={},p.extend=function(a,b){a=a||{};for(var c in b)b.hasOwnProperty(c)&&(a[c]="object"==typeof b[c]?p.extend(a[c],b[c]):b[c]);return a},p.isString=function(a){return"string"==typeof a},p.isBoolean=function(a){return"boolean"==typeof a},p.isNumber=function(a){return"number"==typeof a},p.isArray=function(a){return a?!!a.isArray:!1},p.isEmpty=function(a){if(p.isString(a))return""===a;if(p.isArray(a))return 0===a.length;if(p.isObject(a)){for(var b in a)return!1;return!0}return!1},p.isUndefined=function(a){return"undefined"==typeof a},p.isFunction=function(a){return"function"==typeof a},p.isObject=function(a){return"object"==typeof a},p.isDate=function(a){return a instanceof Date};var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},f="[object Arguments]",g="[object Array]",h="[object Boolean]",i="[object Date]",j="[object Number]",k="[object Object]",l="[object RegExp]",m="[object String]";p.isEqual=function n(c,d,o,p,q,r){if(o){var s=o(c,d);if("undefined"!=typeof s)return!!s}if(c===d)return 0!==c||1/c==1/d;var t=typeof c,u=typeof d;if(!(c!==c||c&&e[t]||d&&e[u]))return!1;if(null==c||null==d)return c===d;var v=toString.call(c),w=toString.call(d);if(v==f&&(v=k),w==f&&(w=k),v!=w)return!1;switch(v){case h:case i:return+c==+d;case j:return c!=+c?d!=+d:0==c?1/c==1/d:c==+d;case l:case m:return c==String(d)}var x=v==g;if(!x){var y=hasOwnProperty.call(c,"__wrapped__"),z=hasOwnProperty.call(d,"__wrapped__");if(y||z)return n(y?c.__wrapped__:c,z?d.__wrapped__:d,o,p,q,r);if(v!=k)return!1;var A=c.constructor,B=d.constructor;if(A!=B&&!(isFunction(A)&&A instanceof A&&isFunction(B)&&B instanceof B)&&"constructor"in c&&"constructor"in d)return!1}var C=!q;q||(q=a()),r||(r=a());for(var D=q.length;D--;)if(q[D]==c)return r[D]==d;var E=0;if(s=!0,q.push(c),r.push(d),x){if(D=c.length,E=d.length,s=E==D,s||p)for(;E--;){var F=D,G=d[E];if(p)for(;F--&&!(s=n(c[F],G,o,p,q,r)););else if(!(s=n(c[E],G,o,p,q,r)))break}}else forIn(d,function(a,b,d){return hasOwnProperty.call(d,b)?(E++,s=hasOwnProperty.call(c,b)&&n(c[b],a,o,p,q,r)):void 0}),s&&!p&&forIn(c,function(a,b,c){return hasOwnProperty.call(c,b)?s=--E>-1:void 0});return q.pop(),r.pop(),C&&(b(q),b(r)),s}}}(),a.data=a.data||{},a.data.inspector=function(){function a(a){this.data=a||{}}return a.prototype.get=function(a,b){for(var c=a.split(b||"."),d="",e=0,f=c.length,g=this.data;f>e&&(d=c[e],g=g[d],void 0!==g);)e+=1;return g},a.prototype.set=function(a,b,c,d){for(var e=a.split(c||"."),f="",g=0,h=e.length-1,i=this.data;h>g;)f=e[g],f&&(i=void 0===i[f]||null===i[f]?i[f]={}:i[f]),g+=1;if(e.length>1){var j=e.pop();i[j]&&d?angular.extend(i[j],b):i[j]=b}return this.data},a.prototype.path=function(a){return this.set(a,{})},function(b){return new a(b)}}(),a.data=a.data||{},a.data.diff=function(b,c){var d,e={};b=b||{};for(var f in c)if(f in b)if(p.isDate(c[f]))d=p.isDate(b[f])?b[f].toISOString():b[f],c[f].toISOString()!==d&&(e[f]=c[f]);else if(p.isObject(c[f])&&!p.isArray(c[f])){var g=a.data.diff(b[f],c[f]);p.isEmpty(g)||(e[f]=g)}else p.isEqual(b[f],c[f])||(e[f]=c[f]);else e[f]=c[f];return p.isEmpty(e)?null:e};var q=function(){function b(b){var d=b.uid.split(".").length,e=a.util.array.toArray(arguments),f=c("	",d)+b.uid+":"+b.type+":"+b.status+":"+b.state+":"+b.progress+"::";e.shift(),e[0]=f+e[0],console.log.apply(console,e)}function c(a,b){for(var c="";c.length<b;)c+=a;return c}var d={};return d.log=b,d}(),r={ROOT:"root",STEP:"step",VAR:"var",FIND:"find",FIND_TEXT:"findText",FIND_VAL:"findVal",ASSERT:"assert",EXPECT:"expect",IF:"if",ELSEIF:"elseif",ELSE:"else",AJAX:"ajax",PATH:"path",PAGE:"page",SOCKET:"socket"},s={UNRESOLVED:"unresolved",FAIL:"fail",PASS:"pass",TIMED_OUT:"timedOut",SKIP:"skip"},t={WAITING:"waiting",ENTERING:"entering",RUNNING:"running",COMPLETE:"complete"},u="steps",v=o.events,w="_depencency",x={};g.prototype[r.ASSERT]=function(){var a=!0;return a?s.PASS:s.FAIL},g.prototype[r.EXPECT]=function(a){var b=o.getLastStep();return b.payload===a.data?s.PASS:s.FAIL},g.prototype[r.FIND]=function(b){if(!b.data||"string"!=typeof b.data)throw new Error("Invalid selector for step of type "+b.type);var c=a.selector.query(b.data);return b.element=c&&c[0],b.payload=c.length,b.element?s.PASS:s.FAIL},g.prototype[r.FIND+"Val"]=function(a){var b=o.getLastStep();return a.element=b.element,a.payload=a.element.value,s.PASS},g.prototype[r.FIND+"Text"]=function(a){var b=o.getLastStep();return a.element=b.element,a.payload=a.element.innerText,s.PASS},j(r.STEP="step",{label:"",type:r.STEP,status:s.UNRESOLVED,state:t.WAITING,childIndex:-1,skipCount:0,startTime:0,time:0,execCount:0,increment:50,expectedTime:100,maxTime:2e3,progress:0},function(){return o.statuses.PASS}),j("root",{},function(){return s.PASS}),function(){function a(a){var b=o.getPrevSibling(a);return!b||b.type!==r.IF&&b.type!==r.ELSEIF?null:b}j(r.IF="if",{increment:10,expectedTime:50,maxTime:500},function(a){return a.override||o.statuses.PASS}),j(r.ELSEIF="elseif",{increment:10,expectedTime:50,maxTime:500},function(a){return a.override||o.statuses.PASS},a),j(r.ELSE="else",{increment:10,expectedTime:50,maxTime:500},function(a){return a.override||o.statuses.PASS},a)}(),function(){function a(a){return o.getParentOfType(a,r.FIND)}j(r.FIND="find",{maxTime:1e4},function(a){return a.override||o.statuses.PASS}),j(r.VAL="val",{maxTime:1e4},function(a){return a.override||o.statuses.PASS},a),j(r.TEXT="text",{maxTime:1e4},function(a){return a.override||o.statuses.PASS},a)}(),j(r.RUN="run",{scenario:"",maxTime:100},function(){return o.statuses.PASS}),j(r.SCENARIO="scenario",{vars:{},maxTime:100},function(){return o.statuses.PASS}),j(r.SET="set",{property:"",text:"",maxTime:1e3},function(a,b){if(!b)throw new Error('Type "'+r.SET+'" can only be used inside a scenario.');return b.vars[a.property]=a.text,o.statuses.PASS},function(a){return o.getParentOfType(a,r.SCENARIO)}),k(o);var y={$$hashKey:!0,element:!0},z={$$hashKey:!0,uid:!0,index:!0,state:!0,status:!0,progress:!0,time:!0,startTime:!0,timeCount:!0};a.selector=function(){function b(a,b){b=b||z.config.doc.body;var c,d,e=/:eq\((\d+)\)$/,f=a.match(e);return f&&f.length&&(a=a.replace(e,""),d=f[1]),c=b.querySelectorAll(a),c&&void 0!==d?c[d]:c}function c(c,d){if(e(c)){for(var g,i,k,l=j(d),m=z.config.doc.body,n=h(c,m,l,null,!0);n.count>n.totalCount;)n=n.parent;if(n=n.parent||n,k=n.str||q(n),n.str)for(var o=n.child;o;)k+=" "+o.str,o=o.child;return(n.count>1||n.child&&n.child.count)&&(g=a.util.array.toArray(b(k,m)),i=g.indexOf(c),k+=":eq("+i+")"),k+=f()}return""}function d(a,b,c){if(e(a)){var d=j(c),g=h(a,b,d);return q(g)+f()}return""}function e(a){if(!a)return"";if(a&&a.length)throw new Error("selector can only build a selection to a single DOMElement. A list was passed.");return!0}function f(){return z.config.addVisible?":visible":""}function g(a,b){return"string"==typeof b&&b===a?!0:"object"==typeof b&&a.match(b)?!0:!1}function h(a,b,c,d,e){var f;return a?(b=b||z.config.doc,f={element:a,ignoreClass:c,maxParent:b,classes:k(a,c),attributes:l(a,d),type:a.nodeName&&a.nodeName.toLowerCase()||"",child:d},(!f.attributes.$unique||d)&&(e?(f.str=q(f,0,null,!0),f.count=b.querySelectorAll(f.str).length,f.count>1&&(f.parent=s(a,b,c,f,e))):f.parent=s(a,b,c,f,e)),f):""}function i(a){return"number"!=typeof a}function j(a){return a=a||[],"function"==typeof a?a:function(b){if(a instanceof Array)for(var c=0,d=a.length;d>c;){if(g(b,a[c]))return!1;c+=1}else if(g(b,a))return!1;return!0}}function k(a,b){var c=ux.filter(a.classList,i);return c=ux.filter(c,y),ux.filter(c,b)}function l(a){var b,c=0,d=a.attributes?a.attributes.length:0,e=[],f=n(a.attributes);if(f&&("id"===f.name&&z.config.allowId?e.push("#"+f.value):"id"!==f.name&&e.push(m(f)),e.length))return e.$unique=!0,e;if(z.config.allowAttributes)for(;d>c;)b=a.attributes[c],v[b.name]||w[b.name]||e.push(m(b)),c+=1;return e}function m(a){return"["+o(a.name)+"='"+p(a.value)+"']"}function n(a){for(var b,c,d=0,e=a?a.length:0;e>d;){if(b=a[d],c=o(b.name),w[c])return b;d+=1}return null}function o(a){var b,c,d=1;if(a.indexOf("-")){for(b=a.split("-"),c=b.length;c>d;)b[d]=b[d].charAt(0).toUpperCase()+b[d].substr(1),d+=1;a=b.join("")}return a}function p(a){return a.replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(a,b,c,d){var e,f,g;return b=b||0,f=a&&!a.attributes.$unique?q(a.parent,b+1):"",a&&(f+=(f.length?" ":"")+r(a)),b||d||(g=c||a.maxParent,e=g.querySelectorAll&&g.querySelectorAll(f)||[],e.length>1&&(f+=":eq("+t(e,a.element)+")")),f}function r(a){return a.attributes.$unique?a.attributes[0]:a.type+a.attributes.join("")+(a.classes.length?"."+a.classes.join("."):"")}function s(a,b,c,d,e){var f=a.parentNode;return f&&f!==b?h(a.parentNode,b,c,d,e):null}function t(a,b){var c,d=a.length;for(c=0;d>c;c+=1)if(b===a[c])return c;return-1}function u(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}var v,w,x,y,z;return z={config:{doc:window.document,allowId:!0,allowAttributes:!0,addVisible:!1},addOmitAttrs:function(){return a.each(arguments,function(a){v[a]=!0}),this},removeOmitAttrs:function(){return a.each(arguments,function(a){delete v[a]}),this},getOmitAttrs:function(){return u(v)},resetOmitAttrs:function(){v={"class":!0,style:!0}},addUniqueAttrs:function(){return a.each(arguments,function(a){w[a]=!0}),this},removeUniqueAttrs:function(){return a.each(arguments,function(a){delete w[a]}),this},getUniqueAttrs:function(){return u(w)},resetUniqueAttrs:function(){w={id:!0,uid:!0}},addClassOmitFilters:function(){return a.each(arguments,function(a){x.push(a)}),y=j(x),this},removeClassOmitFilters:function(){return a.each(arguments,function(a){var b=x.indexOf(a);-1!==b&&x.splice(b,1)}),y=j(x),this},getClassOmitFilters:function(){return x.slice(0)},resetClassOmitFilters:function(){x=[],y=j(x)},query:b,get:c,getCleanSelector:c,quickSelector:d,reset:function(){z.resetOmitAttrs(),z.resetUniqueAttrs(),z.resetClassOmitFilters()}},z.reset(),z}(),function(a){function b(a,b,c,d,e){e=e||{};for(var f,h=b.split("."),i=0;h.length>1;i++){f=g(h.shift(),d);var j=a[f];j||(j={},a[f]=j),a=j,a.then&&e.unwrapPromises&&(y(d),"$$v"in a||!function(a){a.then(function(b){a.$$v=b})}(a),void 0===a.$$v&&(a.$$v={}),a=a.$$v)}return f=g(h.shift(),d),a[f]=c,c}function c(a,b,c,d,e,f,h){return g(a,f),g(b,f),g(c,f),g(d,f),g(e,f),h.unwrapPromises?function(g,h){var i,j=h&&h.hasOwnProperty(a)?h:g;return null==j?j:(j=j[a],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),b?null==j?void 0:(j=j[b],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),c?null==j?void 0:(j=j[c],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),d?null==j?void 0:(j=j[d],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),e?null==j?void 0:(j=j[e],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),j):j):j):j):j)}:function(f,g){var h=g&&g.hasOwnProperty(a)?g:f;return null==h?h:(h=h[a],b?null==h?void 0:(h=h[b],c?null==h?void 0:(h=h[c],d?null==h?void 0:(h=h[d],e?null==h?void 0:h=h[e]:h):h):h):h)}}function d(a,b){return g(a,b),function(b,c){return null==b?void 0:(c&&c.hasOwnProperty(a)?c:b)[a]}}function e(a,b,c){return g(a,c),g(b,c),function(c,d){return null==c?void 0:(c=(d&&d.hasOwnProperty(a)?d:c)[a],null==c?void 0:c[b])}}function f(a,b,f){if(v.hasOwnProperty(a))return v[a];var h,j=a.split("."),k=j.length;if(b.unwrapPromises||1!==k)if(b.unwrapPromises||2!==k)if(b.csp)h=6>k?c(j[0],j[1],j[2],j[3],j[4],f,b):function(a,d){var e,g=0;do e=c(j[g++],j[g++],j[g++],j[g++],j[g++],f,b)(a,d),d=void 0,a=e;while(k>g);return e};else{var l="var p;\n";s(j,function(a,c){g(a,f),l+="if(s == null) return undefined;\ns="+(c?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'+(b.unwrapPromises?'if (s && s.then) {\n pw("'+f.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),l+="return s;";var m=new Function("s","k","pw",l);m.toString=i(l),h=b.unwrapPromises?function(a,b){return m(a,b,y)}:m}else h=e(j[0],j[1],f);else h=d(j[0],f);return"hasOwnProperty"!==a&&(v[a]=h),h}function g(a,b){if("constructor"===a)throw z("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',b);return a}function h(a,b){if(a){if(a.constructor===a)throw z("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw z("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw z("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b)}return a}function i(a){return function(){return a}}function j(){}function k(a){return"undefined"!=typeof a}function l(a,b){var c=b;return"string"==typeof a&&"$"===a.charAt(0)?c=void 0:m(b)?c="$WINDOW":b&&document===b?c="$DOCUMENT":n(b)&&(c="$SCOPE"),c}function m(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function n(a){return a&&a.$evalAsync&&a.$watch}function o(a,b){return"undefined"==typeof a?void 0:JSON.stringify(a,l,b?"  ":null)}function p(a){return function(){var b,c,d=arguments[0],e="["+(a?a+":":"")+d+"] ",f=arguments[1],g=arguments,h=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(b=e+f.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<g.length?(b=g[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?o(b):b):a}),b=b+"\nhttp://errors.angularjs.org/1.3.0-beta.8/"+(a?a+"/":"")+d,c=2;c<arguments.length;c++)b=b+(2==c?"?":"&")+"p"+(c-2)+"="+encodeURIComponent(h(arguments[c]));return new Error(b)}}function q(a){return"string"==typeof a}function r(a){var b=[],c=0,d=a.length;if(void 0!==a.length)for(;d>c;)b.push(a[c]),c+=1;else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function s(a,b){var c,d,e,f=0;if(arguments.length>2&&(e=r(arguments),e.splice(0,2)),a&&a.length)for(c=a.length;c>f;){if(d=b.apply(null,[a[f],f,a].concat(e)),void 0!==d)return d;f+=1}else if(!(a instanceof Array))for(f in a)if(a.hasOwnProperty(f)&&(d=b.apply(null,[a[f],f,a].concat(e)),void 0!==d))return d;return a}function t(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function u(a){var b=a.$$hashKey;return s(arguments,function(b){b!==a&&s(b,function(b,c){a[c]=b})}),t(a,b),a}var v={},w={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:j,"+":function(a,b,c,d){return c=c(a,b),d=d(a,b),k(c)?k(d)?c+d:c:k(d)?d:void 0},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(k(c)?c:0)-(k(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":j,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},x={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},y=function(a){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(a)&&(promiseWarningCache[a]=!0,$log.warn("[$parse] Promise found in the expression `"+a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},z=p("$parse"),A=function(a){return q(a)?a.toLowerCase():a},B=function(a){this.options=a};B.prototype={constructor:B,lex:function(a){this.text=a,this.index=0,this.ch=void 0,this.lastCh=":",this.tokens=[];for(var b,c=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===c[0]&&(b=this.tokens[this.tokens.length-1])&&(b.json=-1===b.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&c.unshift(this.ch),this.is("}]")&&c.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var d=this.ch+this.peek(),e=d+this.peek(2),f=w[this.ch],g=w[d],h=w[e];h?(this.tokens.push({index:this.index,text:e,fn:h}),this.index+=3):g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=2):f?(this.tokens.push({index:this.index,text:this.ch,fn:f,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=k(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw z("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=A(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,json:!0,fn:function(){return a}})},readIdent:function(){for(var a,c,d,e,g=this,h="",i=this.index;this.index<this.text.length&&(e=this.text.charAt(this.index),"."===e||this.isIdent(e)||this.isNumber(e));)"."===e&&(a=this.index),h+=e,this.index++;if(a)for(c=this.index;c<this.text.length;){if(e=this.text.charAt(c),"("===e){d=h.substr(a-i+1),h=h.substr(0,a-i),this.index=c;break}if(!this.isWhitespace(e))break;c++}var j={index:i,text:h};if(w.hasOwnProperty(h))j.fn=w[h],j.json=w[h];else{var k=f(h,this.options,this.text);j.fn=u(function(a,b){return k(a,b)},{assign:function(a,c){return b(a,h,c,g.text,g.options)}})}this.tokens.push(j),d&&(this.tokens.push({index:a,text:".",json:!1}),this.tokens.push({index:a+1,text:d,json:!1}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=x[f];c+=h?h:f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,json:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var C=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};C.ZERO=u(function(){return 0},{constant:!0}),C.prototype={constructor:C,parse:function(a,b){this.text=a,this.json=b,this.tokens=this.lexer.lex(a),b&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:a,index:0})});var c=b?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),c.literal=!!c.literal,c.constant=!!c.constant,c},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),b.json&&(a.constant=!0,a.literal=!0)}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw z("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw z("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.json&&!e.json&&this.throwError("is not valid json",e),this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return u(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return u(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return u(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return(b=this.expect("?"))?(a=this.ternary(),(b=this.expect(":"))?this.ternaryFn(c,a,this.ternary()):void this.throwError("expected :",b)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b
},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(C.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=f(d,this.options,this.text);return u(function(b,c,d){return e(d||a(b,c))},{assign:function(e,f,g){return b(a(e,g),d,f,c.text,c.options)}})},objectIndex:function(a){var b=this,c=this.expression();return this.consume("]"),u(function(d,e){var f,g,i=a(d,e),j=c(d,e);return i?(f=h(i[j],b.text),f&&f.then&&b.options.unwrapPromises&&(g=f,"$$v"in f||(g.$$v=void 0,g.then(function(a){g.$$v=a})),f=f.$$v),f):void 0},{assign:function(d,e,f){var g=c(d,f),i=h(a(d,f),b.text);return i[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],i=b?b(e,f):e,k=0;k<c.length;k++)g.push(c[k](e,f));var l=a(e,f,i)||j;h(i,d.text),h(l,d.text);var m=l.apply?l.apply(i,g):l(g[0],g[1],g[2],g[3],g[4]);return h(m,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),u(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),d=c.string||c.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(b=!1)}while(this.expect(","));return this.consume("}"),u(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};a.parser=function(){var a=new B({}),b={},c=new C(a,b,{unwrapPromises:!0});return c}()}(this?this.ux=this.ux||{}:a,function(){return this}()),function(){function b(a){return"true"===a||"false"===a?"true"===a:""!==a&&a&&!isNaN(a)?parseFloat(a):a}var c={extend:a.extend,each:a.each,isArray:p.isArray};c.extend(c,{parse:function(a){var b;return a=this.closeOpenNodes(a),a=a.replace(/<(\w+)/g,'<steps type="$1"'),a=a.replace(/<\/\w+/g,"</steps"),b=this.xml2json(a)},closeOpenNodes:function(a){return a=a.replace(/<(\w+)\/>/gim,"<$1></$1>"),a=a.replace(/(<(\w+)[^>]+?)\/>/gim,"$1></$2>")},xml2json:function(a,d){function e(a,h){if(!a)return null;{var i,j="",k=null,l=null;a.nodeType,f(a.localName||a.nodeName),a.text||a.nodeValue||""}a.childNodes&&a.childNodes.length>0&&c.each(a.childNodes,function(a){var b=a.nodeType,c=f(a.localName||a.nodeName),d=a.text||a.nodeValue||"";if(8!==b)if(3!==b&&4!==b&&c)k=k||{},k[c]?(k[c].length||(k[c]=g(k[c])),k[c]=g(k[c]),k[c][k[c].length]=e(a,!0),k[c].length=k[c].length):k[c]=e(a);else{if(d.match(/^\s+$/))return;j+=d.replace(/^\s+/,"").replace(/\s+$/,"")}}),j&&(j=b(j)),a.attributes&&a.attributes.length>0&&(l={},k=k||{},c.each(a.attributes,function(a){var c=f(a.name),d=a.value;"xmlns"!==c&&(l[c]=d,k[c]?(k[i]=g(k[i]),k[c][k[c].length]=d,k[c].length=k[c].length):k[c]=b(d))})),k&&(""===j&&(k=c.extend({},k||{})),j=k.text?"object"==typeof k.text?k.text:k.txt||j||"":j,void 0!==j&&""!==j&&(k.text=j),j="");var m=k||j;return d&&(j&&(m={}),j=m.text||j||"",j&&(m.text=j),h||(m=g(m))),m}if(!a)return{};var f=function(a){return String(a||"").replace(/-/g,"_")},g=function(a){return c.isArray(a)||(a=[a]),a.length=a.length,a};if("string"==typeof a&&(a=c.text2xml(a)),a.nodeType){if(3===a.nodeType||4===a.nodeType)return a.nodeValue;var h=9===a.nodeType?a.documentElement:a,i=e(h,!0);return a=null,h=null,i}},text2xml:function(a){var b,c;try{c=DOMParser?new DOMParser:new ActiveXObject("Microsoft.XMLDOM"),c.async=!1}catch(d){throw new Error("XML Parser could not be instantiated")}try{b=DOMParser?c.parseFromString(a,"text/xml"):c.loadXML(a)?c:!1}catch(d){throw new Error("Error parsing XML string")}return b}}),o.parse=c}()}(this.go=this.go||{},function(){return this}());