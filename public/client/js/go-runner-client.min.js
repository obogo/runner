/*
* goRunner v.0.0.1
* (c) 2014, Obogo
* License: Obogo 2014. All Rights Reserved.
*/
!function(a){"use strict";function b(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&(c+=1);return c}function c(a){for(var b=0;void 0!==a[b];)b+=1;return b}function d(a,b,c){function d(a,b){var c,d;d=h[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return h[a]=h[a]||[],h[a].push(b),function(){d(a,b)}}function f(b,c){return b&&b.apply(a,c)}function g(a){if(h[a])for(var b=0,c=h[a],d=c.length;d>b;)f(c[b],arguments),b+=1}var h={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.dispatch=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.dispatch=g)}function e(a){var b=[],c=0,d=a.length;if(void 0!==a.length)for(;d>c;)b.push(a[c]),c+=1;else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function f(a,b){var c,d,e,f,g;for(b||(b=function(a,b){return a>b?1:b>a?-1:0}),d=a.length,f=d-1,c=0;d>c;c+=1)for(e=0;f>e;e+=1)b(a[e],a[e+1])>0&&(g=a[e+1],a[e+1]=a[e],a[e]=g);return a}function g(b,c){var d,e,f,g=0;if(arguments.length>2&&(f=a.util.array.toArray(arguments),f.splice(0,2)),b&&b.length)for(d=b.length;d>g;){if(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e)return e;g+=1}else if(!(b instanceof Array))for(g in b)if(b.hasOwnProperty(g)&&(e=c.apply(null,[b[g],g,b].concat(f)),void 0!==e))return e;return b}function h(b){for(var c,d,e=a.util.array.toArray(arguments),f=1,g=e.length,i=this||{};g>f;){c=e[f];for(d in c)c.hasOwnProperty(d)&&(b[d]&&"object"==typeof b[d]?b[d]=h.apply(i,[b[d],c[d]]):c[d]instanceof Array?(b[d]=b[d]||(i&&i.arrayAsObject?{length:c[d].length}:[]),c[d].length&&(b[d]=h.apply(i,[b[d],c[d]]))):b[d]=c[d]&&"object"==typeof c[d]?h.apply(i,[b[d]||{},c[d]]):c[d]);f+=1}return b}function i(a,b){this.name=a,this.style=b}function j(a){if(a.state===H.WAITING)k(a,H.PRE_EXEC);else if(a.state===H.PRE_EXEC)k(a,H.EXEC_CHILDREN);else if(a.state===H.EXEC_CHILDREN)k(a,H.POST_EXEC);else{if(a.state!==H.POST_EXEC)throw new Error("Cannot proceed to next state.");k(a,H.COMPLETE)}}function k(a,b){var c=M[a.type];if(!b)throw new Error('Invalid State "'+b+'"');a.stateHistory.push(a.state),a.state=b,c.onStateChange&&l(a,"onStateChange",{state:a.state,prevState:a.stateHistory[a.stateHistory.length-1]})}function l(a,b,c){var d;if(M[a.type][b])try{d=n(M[a.type][b],a,c)}catch(e){m(a,e)}return d}function m(b,c){var d={message:c.toString(),stackTrace:a.printStackTrace(c)};b.errors=b.errors||[],b.errors.push(d),C.options.stopOnError&&n(C.stop,b,{error:d})}function n(b,c,d){b.$inject||(b.$inject=o(b));var e=b.$inject.slice();return a.each(e,p,c,d),b.apply(c,e)}function o(a){var b=a.toString();return b.match(/\(.*\)/)[0].match(/([\$\w])+/gm)}function p(a,b,c,d,e){var f;F[a.toUpperCase()]?f=C.getParentOfType(d,a):e&&e[a]&&(f=e[a]),c[b]=f}function q(){function b(a){w=x=a}function c(b){var c=x;a.each(b,function(a){a=parseInt(a,10),c.childIndex=a,c=c[I][a],A.push(a),w=c,j(w)})}function d(a){return a?A.slice(0,a):A}function e(){return w}function f(){return A.length}function g(){w||i(x),k()||m()||l()||w!==x&&g()}function h(a){var b=a.uid.split("."),c=0,d=b.length-1;for(b.shift();d>c;)b[c]=parseInt(b[c],10),c+=1;return b}function i(a){var b,c=h(a),d=0,e=c.length;for(b=n(c,0,x,-1),b&&(b.childIndex=c[e-1]||0),A.length=0;e>d;)A[d]=c[d],d+=1;w=a,j(w)}function k(){var a=w[I].length;return w.childIndex>=a?!1:a&&w.childIndex+1<a?(i(w[I][w.childIndex+1]),!0):(w.childrenComplete=!0,!1)}function l(){var a=n(A,0,x,-1);return a?(i(a),!0):!1}function m(){var a,b=A.length-1;return A[b]+=1,a=n(A,0,x,0),a?(i(a),!0):l()}function n(a,b,c,d){c=c||x,b=b||0,d=d||0;var e=a[b];return b>=a.length+d?c:void 0!==e&&c[I][e]?(c=c[I][e],n(a,b+1,c,d)):null}function o(a){var b=h(a);return b.length?n(b,0,x,-1):x}function p(){var a=[];return q(x,null,null,a),a}function q(b,c,d,e){a.each(b[I],q,e),t(b,e)}function r(a){var b=M[a.type],c=0,d=0;return b.preExec&&(d+=1,c+=a.state===H.EXEC_CHILDREN||a.state===H.POST_EXEC||a.state===H.COMPLETE?1:0),b.postExec&&(d+=1,c+=a.state===H.COMPLETE?1:0),c/d}function s(a,b){if(b=b||y&&y.slice()||[],a=a||e()){y&&(y=null),t(a,b);var c=o(a);return c&&c!==a&&s(c,b),b}}function t(a,b){var c,d,e=0;if(a.state===H.COMPLETE)a.progress=1;else if(c=a[I].length,c&&-1!==a.childIndex){for(d=0;e<=a.childIndex&&c>e;)d+=a[I][e].progress,e+=1;d+=r(a),c+=1,a.progress=d/c}else a.progress=r(a);b.push(a)}function u(){if(x){var a=v(x),b=a.complete?a.time/a.complete:0,c=a.total*b;return a.totalTime>c&&(c=a.totalTime),Math.ceil(.001*(c-a.time))}return 0}function v(a){for(var b,c=0,d=0,e=0,f=0,g=0,h=a[I].length;h>g;)a[I].length&&(b=v(a[I][g]),c+=b.complete,d+=b.total,e+=b.time,f+=b.totalTime),c+=a.state===H.COMPLETE?1:0,d+=1,e+=a.time,f+=a.time||2*a.increment,g+=1;return{complete:c,total:d,time:e,totalTime:f}}var w,x,y,z,A=[];this.setData=b,this.setPath=c,this.getDepth=f,this.next=function(){return z=e(),g()},this.getLastStep=function(){return z},this.getSelected=e,this.getPath=d,this.getProgressChanges=s,this.getAllProgress=p,this.getTime=u,this.getParent=o}function r(b,c,d,e){function f(a){var b=Date.now(),c=l+e;clearTimeout(j),a&&(i=a),b>c?(l=b,g()):j=setTimeout(f,c-b)}function g(){var e,f,g=d.getPath().join(".");c.activePath="R"+(g&&"."+g||""),d.getProgressChanges(),e=A(c),f=a.data.diff(h,e),h=e,b.dispatch(i,f)}var h,i,j,k={},l=0;return e=e||0,k.throttle=e,k.fire=f,k}function s(b,c){var d;if(L[b])throw new Error(b+" is already registered");F[b.toUpperCase()]=b,d=c(),L[b]=d.options,M[b]=d,a.each(d,function(a,b,c){if(D.isArray(a)){var d=a.pop();d.$inject=a,c[b]=d}else a.$inject=[]})}function t(a){var b,c,d=N;if(a.uid&&(c=C.getParentOfType(a,F.SCENARIO),c&&(d=c.scenarios)),b=A(a,!0),d[b.name])throw new Error("Scenario "+b.name+" is already registered");d[b.name]=b}function u(a,b){for(var c=C.getParentOfType(a,F.SCENARIO);c;){if(c.scenarios[b])return void delete N[b];c=C.getParentOfType(c,F.SCENARIO)}delete N[b]}function v(a,b){return!!w(a,b)}function w(a,b){for(var c=C.getParentOfType(a,F.SCENARIO);c;){if(c.scenarios[b])return c.scenarios[b];c=C.getParentOfType(c,F.SCENARIO)}return N[b]}function x(a,b){var c,d,e,f;if(a.ownerDocument)c=a.ownerDocument;else{if(9!=a.nodeType)throw new Error("Invalid node passed to fireEvent: "+a.id);c=a}if(a.dispatchEvent){switch(f="",b){case"click":case"mousedown":case"mouseup":f="MouseEvents";break;case"focus":case"change":case"blur":case"select":f="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+b+"'."}d=c.createEvent(f),e="change"==b?!1:!0,d.initEvent(b,e,!0),d.synthetic=!0,a.dispatchEvent(d,!0)}else a.fireEvent&&(d=c.createEventObject(),d.synthetic=!0,a.fireEvent("on"+b,d))}function y(b){function c(){return R[I]}function e(a){K=D.isArray(a)?a:[a],f()}function f(){i(),g(K),x(R),R.timeLeft=M.getTime(),y(J.runner.ON_RESET)}function g(b){if(b){var c=a.each(b.slice?b.slice():b,z,L);R[I]=c,M.setData(R)}}function h(a){N.async||(B=1),M.setPath(a?"string"==typeof a?a.split("."):a:[0]),E.log(M.getSelected(),"start %s",M.getSelected().label),y(J.runner.ON_START),n()}function i(a){B&&(a&&console&&console.log&&console.log("RUNNER STOPPED ON ERROR: "+a.message),clearTimeout(B),B=0,y(J.runner.ON_STOP))}function k(){activeStep?(activeStep.time=0,o()):h()}function n(){N.async?(clearTimeout(B),B=setTimeout(o,M.getSelected().increment)):o()}function o(){var a=M.getSelected();E.log(a,"%s:%s",a.uid,a.state),x(a),a.state===H.COMPLETE?v(a):a.state!==H.PRE_EXEC||t(a,O)?a.state!==H.POST_EXEC||t(a,P)?a.state===H.EXEC_CHILDREN?a[I].length&&-1===a.childIndex?M.next():(j(a),a.type===F.ROOT&&(b.stop(),y(J.runner.ON_DONE))):j(a):s(a)?w(a):u(a,P):s(a)?w(a):u(a,O),B&&(x(a),y(J.runner.ON_UPDATE),n())}function p(){x(M.getSelected()),M.next(),y()}function s(a){return a.state===H.PRE_EXEC?a.pre.count*a.increment>a.maxTime:a.state===H.POST_EXEC?a.post.count*a.increment>a.maxTime:!0}function t(a,b){var c=a[b];return!!(c&&c.limit&&c.count>=c.limit)}function u(a,b){var c=b+"Exec",d=l(a,c);d&&(a.status=d),a[b].count+=1,a.status===G.PASS?j(a):s(a)&&w(a)}function v(a){return a.type===F.ROOT?void b.stop():void p()}function w(a){x(a),a.status=G.TIMED_OUT,j(a)}function x(a){var b=Date.now();a.startTime||(a.startTime=b),a.time=b-a.startTime}function y(a){S.fire(a)}d(b);var B,K,L="R",M=new q,N={async:!0},R=z({uid:L,label:F.ROOT,type:F.ROOT,index:-1,maxTime:100}),S=r(b,R,M,1e3);return b.options={stopOnError:!0},b.types=F,b.states=H,b.statuses=G,b.start=h,b.stop=i,b.resume=k,b.reset=f,b.getSteps=c,b.loadTest=e,b.getParent=M.getParent,b.getParentOfType=function(a,b){for(var c=C.getParent(a);c.type!==b&&c.type!==F.ROOT;)c=C.getParent(c);return c.type===b?c:null},b.getPrevSibling=function(a){var c=b.getParent(a),d=c[I][a.index-1];return d},b.getNextSibling=function(a){var c=b.getParent(a),d=c[I][a.index+1];return d},b.getRoot=function(){return b.exportRoot=b.exportRoot||{},A(R,null,b.exportRoot),b.exportRoot},b.getCurrentStep=function(){return M.getSelected()},b.getLastStep=function(){return M.getLastStep()},b.throwError=function(a,b){l(a,"onError",{error:{type:"internal",message:b}})},Q.addEventListener("error",function(a){m(R,a)}),b}function z(b,c,d,e){console.log("	step %s",b.label),e=e||"";var f,g,h,i=(e?e+".":"")+(void 0!==c?c:"R"),j={};if(j.uid=i,j.index=c,j.type=j.type||F.STEP,!b.hasOwnProperty(I)||b[I]instanceof Array||1!==b[I].length||(b[I]=[b[I]]),h=b[I],a.extend(j,L[F.STEP],L[b.type]||{},b),d&&(d[c]=j),j.conditions&&j.conditions.length)for(var k=0,l=j.conditions.length;l>k;)j.conditions[k].steps.isArray||(j.conditions[k].steps=[j.conditions[k].steps]),a.each(j.conditions[k].steps,z,i),k+=1;if(h&&h.length)for(f=0,g=j[I].length,j[I]=[];g>f;)z(h[f],f,j[I],i),f+=1;else j[I]=[];return d?void 0:j}function A(a,b,c){return B(a,null,null,null,b?T:S,c)}function B(b,c,d,e,f,g){g=g||{};var h,i;if(h=L[b.type],!h){if(!K[b.type])throw new Error('Unsupported step type "'+b.type+'"');h={}}for(i in b)if(f[i]);else if(b[i]&&b[i].isArray)g[i]={length:b[i].length},b[i].length&&(U[i]?g[i]=a.extend.apply({arrayAsObject:!0},[{},b[i]]):a.each(b[i],B,g[i],f));else if(b.hasOwnProperty(i)&&h[i]!==b[i]){if("number"==typeof b[i]&&isNaN(b[i]))throw new Error("Export NaN failure.");g[i]=b[i]}return e?void(e[c]=g):g}var C=a.runner=a.runner||{};C.events={admin:{START:"runner:start",STOP:"runner:stop",UPDATE:"runner:update",RESET:"runner:reset",DONE:"runner:done",START_RECORDING:"runner:startRecording",STOP_RECORDING:"runner:stopRecording",LOAD_TEST:"runner:loadTest",REGISTER_SCENARIO:"runner:registerScenario"},runner:{ON_START:"runner:onStart",ON_STOP:"runner:onStop",ON_UPDATE:"runner:onUpdate",ON_RESET:"runner:onReset",ON_DONE:"runner:onDone",ON_START_RECORDING:"runner:onStartRecording",ON_STOP_RECORDING:"runner:onStopRecording",ON_LOAD_TEST:"runner:onLoadTest",ON_REGISTER_SCENARIO:"runner:onRegisterScenario"}},function(a,b){a.printStackTrace=b()}(this||a,function(){function a(b){b=b||{guess:!0};var c=b.e||null,d=!!b.guess,e=new a.implementation,f=e.run(c);return d?e.guessAnonymousFunctions(f):f}return a.implementation=function(){},a.implementation.prototype={run:function(a,b){return a=a||this.createException(),b=b||this.mode(a),"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":a.stack&&a.sourceURL?"safari":a.stack&&a.number?"ie":a.stack&&a.fileName?"firefox":a.message&&a["opera#sourceloc"]?a.stacktrace?a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":a.message&&a.stack&&a.stacktrace?a.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":a.stack&&!a.fileName?"chrome":"other"},instrumentFunction:function(b,c,d){b=b||window;var e=b[c];b[c]=function(){return d.call(this,a().slice(4)),b[c]._instrumented.apply(this,arguments)},b[c]._instrumented=e},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(a){return(a.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(a){return a.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(a){for(var b="{anonymous}",c=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[4]+":"+h[1]+":"+h[2],j=h[3]||"global code";j=j.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,b),e.push(j+"@"+i+" -- "+d[f+1].replace(/^\s+/,""))}}return e},opera10b:function(a){for(var b=/^(.*)@(.+):(\d+)$/,c=a.stacktrace.split("\n"),d=[],e=0,f=c.length;f>e;e++){var g=b.exec(c[e]);if(g){var h=g[1]?g[1]+"()":"global code";d.push(h+"@"+g[2]+":"+g[3])}}return d},opera10a:function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[3]||b;e.push(i+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}}return e},opera9:function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)/i,d=a.message.split("\n"),e=[],f=2,g=d.length;g>f;f+=2){var h=c.exec(d[f]);h&&e.push(b+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}return e},other:function(a){for(var b,c,d="{anonymous}",e=/function(?:\s+([\w$]+))?\s*\(/,f=[],g=10,h=Array.prototype.slice;a&&f.length<g;){b=e.test(a.toString())?RegExp.$1||d:d;try{c=h.call(a.arguments||[])}catch(i){c=["Cannot access arguments: "+i]}f[f.length]=b+"("+this.stringifyArguments(c)+")";try{a=a.caller}catch(i){f[f.length]="Cannot access caller: "+i;break}}return f},stringifyArguments:function(a){for(var b=[],c=Array.prototype.slice,d=0;d<a.length;++d){var e=a[d];void 0===e?b[d]="undefined":null===e?b[d]="null":e.constructor&&(b[d]=e.constructor===Array?e.length<3?"["+this.stringifyArguments(e)+"]":"["+this.stringifyArguments(c.call(e,0,1))+"..."+this.stringifyArguments(c.call(e,-1))+"]":e.constructor===Object?"#object":e.constructor===Function?"#function":e.constructor===String?'"'+e+'"':e.constructor===Number?e:"?")}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return"undefined"!=typeof location&&-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=/\{anonymous\}\(.*\)@(.*)/,d=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,e=a[b],f=c.exec(e);if(f){var g=d.exec(f[1]);if(g){var h=g[1],i=g[2],j=g[3]||0;if(h&&this.isSameDomain(h)&&i){var k=this.guessAnonymousFunction(h,i,j);a[b]=e.replace("{anonymous}",k)}}}}return a},guessAnonymousFunction:function(a,b){var c;try{c=this.findFunctionName(this.getSource(a),b)}catch(d){c="getSource failed with url: "+a+", exception: "+d.toString()}return c},findFunctionName:function(a,b){for(var c,d,e,f=/function\s+([^(]*?)\s*\(([^)]*)\)/,g=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,h=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,i="",j=Math.min(b,20),k=0;j>k;++k)if(c=a[b-k-1],e=c.indexOf("//"),e>=0&&(c=c.substr(0,e)),c){if(i=c+i,d=g.exec(i),d&&d[1])return d[1];if(d=f.exec(i),d&&d[1])return d[1];if(d=h.exec(i),d&&d[1])return d[1]}return"(?)"}},a}),C.count=b,C.countAsArray=c,a.util=a.util||{},a.util.array=a.util.array||{},a.util.array.toArray=e,a.util.array.sort=f,a.each=g,a.extend=h,a.charPack=function(a,b){for(var c="";c.length<b;)c+=a;return c};var D;!function(){function a(){return c.pop()||[]}function b(a){a.length=0,c.length<d&&c.push(a)}var c=[],d=40,e=function(a,b,c){var d,e=a,g=e;if(!e)return g;if(!f[typeof e])return g;b=b&&"undefined"==typeof c?b:baseCreateCallback(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return g;return g};if(window._)D=window._;else{Array.prototype.isArray=!0,D={},D.extend=function(a,b){a=a||{};for(var c in b)b.hasOwnProperty(c)&&(a[c]="object"==typeof b[c]?D.extend(a[c],b[c]):b[c]);return a},D.isString=function(a){return"string"==typeof a},D.isBoolean=function(a){return"boolean"==typeof a},D.isNumber=function(a){return"number"==typeof a},D.isArray=function(a){return a?!!a.isArray:!1},D.isEmpty=function(a){if(D.isString(a))return""===a;if(D.isArray(a))return 0===a.length;if(D.isObject(a)){for(var b in a)return!1;return!0}return!1},D.isUndefined=function(a){return"undefined"==typeof a},D.isFunction=function(a){return"function"==typeof a},D.isObject=function(a){return"object"==typeof a},D.isDate=function(a){return a instanceof Date};var f={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},g="[object Arguments]",h="[object Array]",i="[object Boolean]",j="[object Date]",k="[object Number]",l="[object Object]",m="[object RegExp]",n="[object String]";D.isEqual=function o(c,d,p,q,r,s){if(p){var t=p(c,d);if("undefined"!=typeof t)return!!t}if(c===d)return 0!==c||1/c==1/d;var u=typeof c,v=typeof d;if(!(c!==c||c&&f[u]||d&&f[v]))return!1;if(null==c||null==d)return c===d;var w=toString.call(c),x=toString.call(d);if(w==g&&(w=l),x==g&&(x=l),w!=x)return!1;switch(w){case i:case j:return+c==+d;case k:return c!=+c?d!=+d:0==c?1/c==1/d:c==+d;case m:case n:return c==String(d)}var y=w==h;if(!y){var z=hasOwnProperty.call(c,"__wrapped__"),A=hasOwnProperty.call(d,"__wrapped__");if(z||A)return o(z?c.__wrapped__:c,A?d.__wrapped__:d,p,q,r,s);if(w!=l)return!1;var B=c.constructor,C=d.constructor;if(B!=C&&!(isFunction(B)&&B instanceof B&&isFunction(C)&&C instanceof C)&&"constructor"in c&&"constructor"in d)return!1}var D=!r;r||(r=a()),s||(s=a());for(var E=r.length;E--;)if(r[E]==c)return s[E]==d;var F=0;if(t=!0,r.push(c),s.push(d),y){if(E=c.length,F=d.length,t=F==E,t||q)for(;F--;){var G=E,H=d[F];if(q)for(;G--&&!(t=o(c[G],H,p,q,r,s)););else if(!(t=o(c[F],H,p,q,r,s)))break}}else e(d,function(a,b,d){return hasOwnProperty.call(d,b)?(F++,t=hasOwnProperty.call(c,b)&&o(c[b],a,p,q,r,s)):void 0}),t&&!q&&e(c,function(a,b,c){return hasOwnProperty.call(c,b)?t=--F>-1:void 0});return r.pop(),s.pop(),D&&(b(r),b(s)),t}}}(),a.data=a.data||{},a.data.inspector=function(){function a(a){this.data=a||{}}return a.prototype.get=function(a,b){for(var c=a.split(b||"."),d="",e=0,f=c.length,g=this.data;f>e&&(d=c[e],g=g[d],void 0!==g);)e+=1;return g},a.prototype.set=function(a,b,c,d){for(var e=a.split(c||"."),f="",g=0,h=e.length-1,i=this.data;h>g;)f=e[g],f&&(i=void 0===i[f]||null===i[f]?i[f]={}:i[f]),g+=1;if(e.length>1){var j=e.pop();i[j]&&d?angular.extend(i[j],b):i[j]=b}return this.data},a.prototype.path=function(a){return this.set(a,{})},function(b){return new a(b)}}(),a.data=a.data||{},a.data.diff=function(b,c){var d,e={};b=b||{};for(var f in c)if(f in b)if(D.isDate(c[f]))d=D.isDate(b[f])?b[f].toISOString():b[f],c[f].toISOString()!==d&&(e[f]=c[f]);else if(D.isObject(c[f])&&!D.isArray(c[f])){var g=a.data.diff(b[f],c[f]);D.isEmpty(g)||(e[f]=g)}else D.isEqual(b[f],c[f])||(e[f]=c[f]);else e[f]=c[f];return D.isEmpty(e)?null:e},i.prototype.log=function(b){var c,d,e=a.util.array.toArray(arguments);b&&b.uid&&(c=b.uid.split(".").length,d=a.charPack("	",c)+b.uid+":"+b.type+":"+b.status+":"+b.state+":["+b.progress+"]::",e.shift(),e[0]=d+e[0]),this.applyName(e),this.applyStyle(e),console.log.apply(console,e)},i.prototype.applyName=function(a){var b=a[0];if(this.name){var c=0;if("string"==typeof b&&"	"===b.charAt(c)){for(;"	"===b.charAt(c);)c+=1;c&&(b=b.substr(0,c)+this.name+b.substr(c+1))}b=this.name+"::"+b,a[0]=b}},i.prototype.applyStyle=function(a){this.style&&(a[0]="%c"+a[0],a.splice(1,0,this.style))};var E=new i,F={},G={UNRESOLVED:"unresolved",FAIL:"fail",PASS:"pass",TIMED_OUT:"timedOut"},H={WAITING:"waiting",PRE_EXEC:"preExec",EXEC_CHILDREN:"execChildren",POST_EXEC:"postExec",COMPLETE:"complete"},I="steps",J=C.events,K={"if":!0,elseif:!0,"else":!0},L={},M={},N={},O="pre",P="post",Q=window,R=Q.document;C.registerType=s,C.registerScenario=t,C.unregisterScenario=u,C.hasScenario=v,C.getScenario=w,s(F.STEP="step",function(){return{options:{label:"",type:F.STEP,status:G.UNRESOLVED,state:H.WAITING,stateHistory:[],childIndex:-1,startTime:0,time:0,increment:50,expectedTime:100,maxTime:2e3,progress:0,pre:{count:0,limit:0},post:{count:0,limit:0}},preExec:function(){return G.PASS}}}),s(F.ROOT="root",function(){return{options:{},preExec:function(){return G.PASS}}}),function(){s(F.CONDITION="condition",function(){function b(b,c,d,e){return!b.expression||a.parser.parse(b.expression)(e.vars)?b.steps:void 0}return{options:{conditions:[],increment:1,expectedTime:2,maxTime:10},preExec:["scenario",function(c){return this.steps=a.each(this.conditions,b,c),G.PASS}]}})}(),s(F.FIND="find",function(){return{options:{maxTime:1e4},preExec:function(){return this.element=a.selector.query(this.query,R),this.element=this.element[0]||this.element,this.element?G.PASS:G.FAIL}}}),s(F.VAL="val",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return a.value=a.element.value,G.PASS}]}}),s(F.TEXT="text",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return a.text=a.element.innerText,G.PASS}]}}),s(F.MOUSEDOWN="mousedown",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return x(a.element,"mousedown"),G.PASS}]}}),s(F.MOUSEUP="mouseup",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return x(a.element,"mouseup"),G.PASS}]}}),s(F.MOUSEOVER="mouseover",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return x(a.element,"mouseover"),G.PASS}]}}),s(F.FOCUSIN="focusin",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return x(a.element,"focusin"),G.PASS}]}}),s(F.FOCUSOUT="focusout",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return x(a.element,"focusout"),G.PASS}]}}),s(F.CLICK="click",function(){return{options:{maxTime:1e4},preExec:["find",function(a){return x(a.element,"click"),G.PASS}]}}),s(F.TOBE="toBe",function(){return{options:{property:"value",value:"",increment:1,pre:{limit:1},maxTime:10},preExec:["find",function(a){var b=a.element[this.property];if(b!==this.value)throw new Error("Expected element."+this.property+' of "'+b+'" to be "'+this.value+'".');return G.PASS}],onError:["error",function(a){console.error("ON ERROR CALLED: %s",a.message)}]}});s(F.RUN="run",function(){return{options:{scenario:"",maxTime:100},preExec:function(){var a=C.getScenario(this,this.scenario);if(!a)throw new Error("Unable to find "+F.SCENARIO+' by name of "'+this.scenario+'"');return a.uid&&(a=A(a,!0)),this[I].push(z(a,0,null,this.uid)),C.statuses.PASS},postExec:["scenario",function(a){a.vars[this.name]=this.steps[0].vars}],onError:["error","scenario",function(){}]}}),s(F.SCENARIO="scenario",function(){return{options:{vars:{},scenarios:{},maxTime:100},preExec:function(){return C.hasScenario(this,this.name)||C.registerScenario(this),C.statuses.PASS}}}),s(F.SET="set",function(){return{options:{property:"",text:"",increment:0,maxTime:10},preExec:["scenario",function(a){if(!a)throw new Error('Type "'+F.SET+'" can only be used inside a scenario.');return a.vars[this.property]=this.text,C.statuses.PASS}]}}),y(C);var S={$$hashKey:!0,element:!0,stateHistory:!0,$inject:!0},T={$$hashKey:!0,uid:!0,index:!0,state:!0,status:!0,progress:!0,time:!0,startTime:!0,timeCount:!0,stateHistory:!0},U={errors:!0,pre:!0,post:!0};a.selector=function(){function b(a,b){b=b||z.config.doc.body;var c,d,e=/:eq\((\d+)\)$/,f=a.match(e);return f&&f.length&&(a=a.replace(e,""),d=f[1]),c=b.querySelectorAll(a),c&&void 0!==d?c[d]:c}function c(c,d){if(e(c)){for(var g,i,k,l=j(d),m=z.config.doc.body,n=h(c,m,l,null,!0);n.count>n.totalCount;)n=n.parent;if(n=n.parent||n,k=n.str||q(n),n.str)for(var o=n.child;o;)k+=" "+o.str,o=o.child;return(n.count>1||n.child&&n.child.count)&&(g=a.util.array.toArray(b(k,m)),i=g.indexOf(c),k+=":eq("+i+")"),k+=f()}return""}function d(a,b,c){if(e(a)){var d=j(c),g=h(a,b,d);return q(g)+f()}return""}function e(a){if(!a)return"";if(a&&a.length)throw new Error("selector can only build a selection to a single DOMElement. A list was passed.");return!0}function f(){return z.config.addVisible?":visible":""}function g(a,b){return"string"==typeof b&&b===a?!0:"object"==typeof b&&a.match(b)?!0:!1}function h(a,b,c,d,e){var f;return a?(b=b||z.config.doc,f={element:a,ignoreClass:c,maxParent:b,classes:k(a,c),attributes:l(a,d),type:a.nodeName&&a.nodeName.toLowerCase()||"",child:d},(!f.attributes.$unique||d)&&(e?(f.str=q(f,0,null,!0),f.count=b.querySelectorAll(f.str).length,f.count>1&&(f.parent=s(a,b,c,f,e))):f.parent=s(a,b,c,f,e)),f):""}function i(a){return"number"!=typeof a}function j(a){return a=a||[],"function"==typeof a?a:function(b){if(a instanceof Array)for(var c=0,d=a.length;d>c;){if(g(b,a[c]))return!1;c+=1}else if(g(b,a))return!1;return!0}}function k(a,b){var c=ux.filter(a.classList,i);return c=ux.filter(c,y),ux.filter(c,b)}function l(a){var b,c=0,d=a.attributes?a.attributes.length:0,e=[],f=n(a.attributes);if(f&&("id"===f.name&&z.config.allowId?e.push("#"+f.value):"id"!==f.name&&e.push(m(f)),e.length))return e.$unique=!0,e;if(z.config.allowAttributes)for(;d>c;)b=a.attributes[c],v[b.name]||w[b.name]||e.push(m(b)),c+=1;return e}function m(a){return"["+o(a.name)+"='"+p(a.value)+"']"}function n(a){for(var b,c,d=0,e=a?a.length:0;e>d;){if(b=a[d],c=o(b.name),w[c])return b;d+=1}return null}function o(a){var b,c,d=1;if(a.indexOf("-")){for(b=a.split("-"),c=b.length;c>d;)b[d]=b[d].charAt(0).toUpperCase()+b[d].substr(1),d+=1;a=b.join("")}return a}function p(a){return a.replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(a,b,c,d){var e,f,g;return b=b||0,f=a&&!a.attributes.$unique?q(a.parent,b+1):"",a&&(f+=(f.length?" ":"")+r(a)),b||d||(g=c||a.maxParent,e=g.querySelectorAll&&g.querySelectorAll(f)||[],e.length>1&&(f+=":eq("+t(e,a.element)+")")),f}function r(a){return a.attributes.$unique?a.attributes[0]:a.type+a.attributes.join("")+(a.classes.length?"."+a.classes.join("."):"")}function s(a,b,c,d,e){var f=a.parentNode;return f&&f!==b?h(a.parentNode,b,c,d,e):null}function t(a,b){var c,d=a.length;for(c=0;d>c;c+=1)if(b===a[c])return c;return-1}function u(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}var v,w,x,y,z;return z={config:{doc:window.document,allowId:!0,allowAttributes:!0,addVisible:!1},addOmitAttrs:function(){return a.each(arguments,function(a){v[a]=!0}),this},removeOmitAttrs:function(){return a.each(arguments,function(a){delete v[a]}),this},getOmitAttrs:function(){return u(v)},resetOmitAttrs:function(){v={"class":!0,style:!0}},addUniqueAttrs:function(){return a.each(arguments,function(a){w[a]=!0}),this},removeUniqueAttrs:function(){return a.each(arguments,function(a){delete w[a]}),this},getUniqueAttrs:function(){return u(w)},resetUniqueAttrs:function(){w={id:!0,uid:!0}},addClassOmitFilters:function(){return a.each(arguments,function(a){x.push(a)}),y=j(x),this},removeClassOmitFilters:function(){return a.each(arguments,function(a){var b=x.indexOf(a);-1!==b&&x.splice(b,1)}),y=j(x),this},getClassOmitFilters:function(){return x.slice(0)},resetClassOmitFilters:function(){x=[],y=j(x)},query:b,get:c,getCleanSelector:c,quickSelector:d,reset:function(){z.resetOmitAttrs(),z.resetUniqueAttrs(),z.resetClassOmitFilters()}},z.reset(),z}(),function(a){function b(a,b,c,d,e){e=e||{};for(var f,h=b.split("."),i=0;h.length>1;i++){f=g(h.shift(),d);var j=a[f];j||(j={},a[f]=j),a=j,a.then&&e.unwrapPromises&&(y(d),"$$v"in a||!function(a){a.then(function(b){a.$$v=b})}(a),void 0===a.$$v&&(a.$$v={}),a=a.$$v)}return f=g(h.shift(),d),a[f]=c,c}function c(a,b,c,d,e,f,h){return g(a,f),g(b,f),g(c,f),g(d,f),g(e,f),h.unwrapPromises?function(g,h){var i,j=h&&h.hasOwnProperty(a)?h:g;return null==j?j:(j=j[a],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),b?null==j?void 0:(j=j[b],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),c?null==j?void 0:(j=j[c],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),d?null==j?void 0:(j=j[d],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),e?null==j?void 0:(j=j[e],j&&j.then&&(y(f),"$$v"in j||(i=j,i.$$v=void 0,i.then(function(a){i.$$v=a})),j=j.$$v),j):j):j):j):j)}:function(f,g){var h=g&&g.hasOwnProperty(a)?g:f;return null==h?h:(h=h[a],b?null==h?void 0:(h=h[b],c?null==h?void 0:(h=h[c],d?null==h?void 0:(h=h[d],e?null==h?void 0:h=h[e]:h):h):h):h)}}function d(a,b){return g(a,b),function(b,c){return null==b?void 0:(c&&c.hasOwnProperty(a)?c:b)[a]}}function e(a,b,c){return g(a,c),g(b,c),function(c,d){return null==c?void 0:(c=(d&&d.hasOwnProperty(a)?d:c)[a],null==c?void 0:c[b])}}function f(a,b,f){if(v.hasOwnProperty(a))return v[a];var h,j=a.split("."),k=j.length;if(b.unwrapPromises||1!==k)if(b.unwrapPromises||2!==k)if(b.csp)h=6>k?c(j[0],j[1],j[2],j[3],j[4],f,b):function(a,d){var e,g=0;do e=c(j[g++],j[g++],j[g++],j[g++],j[g++],f,b)(a,d),d=void 0,a=e;while(k>g);return e};else{var l="var p;\n";s(j,function(a,c){g(a,f),l+="if(s == null) return undefined;\ns="+(c?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'+(b.unwrapPromises?'if (s && s.then) {\n pw("'+f.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),l+="return s;";var m=new Function("s","k","pw",l);m.toString=i(l),h=b.unwrapPromises?function(a,b){return m(a,b,y)}:m}else h=e(j[0],j[1],f);else h=d(j[0],f);return"hasOwnProperty"!==a&&(v[a]=h),h}function g(a,b){if("constructor"===a)throw z("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',b);return a}function h(a,b){if(a){if(a.constructor===a)throw z("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw z("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw z("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b)}return a}function i(a){return function(){return a}}function j(){}function k(a){return"undefined"!=typeof a}function l(a,b){var c=b;return"string"==typeof a&&"$"===a.charAt(0)?c=void 0:m(b)?c="$WINDOW":b&&document===b?c="$DOCUMENT":n(b)&&(c="$SCOPE"),c}function m(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function n(a){return a&&a.$evalAsync&&a.$watch}function o(a,b){return"undefined"==typeof a?void 0:JSON.stringify(a,l,b?"  ":null)}function p(a){return function(){var b,c,d=arguments[0],e="["+(a?a+":":"")+d+"] ",f=arguments[1],g=arguments,h=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(b=e+f.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<g.length?(b=g[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?o(b):b):a}),b=b+"\nhttp://errors.angularjs.org/1.3.0-beta.8/"+(a?a+"/":"")+d,c=2;c<arguments.length;c++)b=b+(2==c?"?":"&")+"p"+(c-2)+"="+encodeURIComponent(h(arguments[c]));
return new Error(b)}}function q(a){return"string"==typeof a}function r(a){var b=[],c=0,d=a.length;if(void 0!==a.length)for(;d>c;)b.push(a[c]),c+=1;else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function s(a,b){var c,d,e,f=0;if(arguments.length>2&&(e=r(arguments),e.splice(0,2)),a&&a.length)for(c=a.length;c>f;){if(d=b.apply(null,[a[f],f,a].concat(e)),void 0!==d)return d;f+=1}else if(!(a instanceof Array))for(f in a)if(a.hasOwnProperty(f)&&(d=b.apply(null,[a[f],f,a].concat(e)),void 0!==d))return d;return a}function t(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function u(a){var b=a.$$hashKey;return s(arguments,function(b){b!==a&&s(b,function(b,c){a[c]=b})}),t(a,b),a}var v={},w={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:j,"+":function(a,b,c,d){return c=c(a,b),d=d(a,b),k(c)?k(d)?c+d:c:k(d)?d:void 0},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(k(c)?c:0)-(k(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":j,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},x={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},y=function(a){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(a)&&(promiseWarningCache[a]=!0,$log.warn("[$parse] Promise found in the expression `"+a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},z=p("$parse"),A=function(a){return q(a)?a.toLowerCase():a},B=function(a){this.options=a};B.prototype={constructor:B,lex:function(a){this.text=a,this.index=0,this.ch=void 0,this.lastCh=":",this.tokens=[];for(var b,c=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===c[0]&&(b=this.tokens[this.tokens.length-1])&&(b.json=-1===b.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&c.unshift(this.ch),this.is("}]")&&c.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var d=this.ch+this.peek(),e=d+this.peek(2),f=w[this.ch],g=w[d],h=w[e];h?(this.tokens.push({index:this.index,text:e,fn:h}),this.index+=3):g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=2):f?(this.tokens.push({index:this.index,text:this.ch,fn:f,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=k(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw z("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=A(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,json:!0,fn:function(){return a}})},readIdent:function(){for(var a,c,d,e,g=this,h="",i=this.index;this.index<this.text.length&&(e=this.text.charAt(this.index),"."===e||this.isIdent(e)||this.isNumber(e));)"."===e&&(a=this.index),h+=e,this.index++;if(a)for(c=this.index;c<this.text.length;){if(e=this.text.charAt(c),"("===e){d=h.substr(a-i+1),h=h.substr(0,a-i),this.index=c;break}if(!this.isWhitespace(e))break;c++}var j={index:i,text:h};if(w.hasOwnProperty(h))j.fn=w[h],j.json=w[h];else{var k=f(h,this.options,this.text);j.fn=u(function(a,b){return k(a,b)},{assign:function(a,c){return b(a,h,c,g.text,g.options)}})}this.tokens.push(j),d&&(this.tokens.push({index:a,text:".",json:!1}),this.tokens.push({index:a+1,text:d,json:!1}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=x[f];c+=h?h:f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,json:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var C=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};C.ZERO=u(function(){return 0},{constant:!0}),C.prototype={constructor:C,parse:function(a,b){this.text=a,this.json=b,this.tokens=this.lexer.lex(a),b&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:a,index:0})});var c=b?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),c.literal=!!c.literal,c.constant=!!c.constant,c},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),b.json&&(a.constant=!0,a.literal=!0)}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw z("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw z("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.json&&!e.json&&this.throwError("is not valid json",e),this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return u(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return u(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return u(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return(b=this.expect("?"))?(a=this.ternary(),(b=this.expect(":"))?this.ternaryFn(c,a,this.ternary()):void this.throwError("expected :",b)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(C.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=f(d,this.options,this.text);return u(function(b,c,d){return e(d||a(b,c))},{assign:function(e,f,g){return b(a(e,g),d,f,c.text,c.options)}})},objectIndex:function(a){var b=this,c=this.expression();return this.consume("]"),u(function(d,e){var f,g,i=a(d,e),j=c(d,e);return i?(f=h(i[j],b.text),f&&f.then&&b.options.unwrapPromises&&(g=f,"$$v"in f||(g.$$v=void 0,g.then(function(a){g.$$v=a})),f=f.$$v),f):void 0},{assign:function(d,e,f){var g=c(d,f),i=h(a(d,f),b.text);return i[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],i=b?b(e,f):e,k=0;k<c.length;k++)g.push(c[k](e,f));var l=a(e,f,i)||j;h(i,d.text),h(l,d.text);var m=l.apply?l.apply(i,g):l(g[0],g[1],g[2],g[3],g[4]);return h(m,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),u(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),d=c.string||c.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(b=!1)}while(this.expect(","));return this.consume("}"),u(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};a.parser=function(){var a=new B({}),b={},c=new C(a,b,{unwrapPromises:!0});return c}()}(this?this.ux=this.ux||{}:a,function(){return this}());var V={config:{GOINSTANT_URL:"https://goinstant.net/0fc17c9b2a8f/runner-dev"},events:{ON_USER_READY:"onUserReady",ON_PROJECT_READY:"onProjectReady",ON_CONNECTION_SUCCESS:"onConnectionSuccess",ON_CONNECTION_ERROR:"onConnectionError",ON_TRACK_CONNECTION_SUCCESS:"onTrackConnectionSuccess",ON_TRACK_CONNECTION_ERROR:"onTrackConnectionError"}},W={name:"ProjectA"},X={displayName:"My Device1",status:"init",progress:{stepUID:"",timeRemaining:"",percent:0},error:{},ua:navigator.userAgent};!function(){var a={},b=new i("serviceConst","color:#FF0099");V.on=function(c,d){b.log("on %s",c);var e=a[c];"undefined"==typeof e&&(e=a[c]=[]),e.push(d)},V.dispatch=function(c,d,e){b.log("dispatch %s",c);var f,g=a[c],h=0;if("undefined"!=typeof g)for(d=d instanceof Array?d:[d],e=e||V,f=g.length;f>h;)g[h].apply(e,d),h+=1}}(),function(){function a(){h.log("init"),V.on(V.events.ON_USER_READY,c)}function b(){h.log("connect %o",f),g.isConnected=!1,e=new goinstant.Connection(V.config.GOINSTANT_URL),e.connect(X,d)}function c(a){h.log("onUserReady"),f=a,b()}function d(a){return h.log("onConnection"),a?(g.isConnected=!1,h.log("onConnectionError %o",a),V.dispatch(V.events.ON_CONNECTION_ERROR,a)):(g.isConnected=!0,void V.dispatch(V.events.ON_CONNECTION_SUCCESS,e))}var e,f,g=this||{},h=new i("socketService","color:#FF00FF");g.isConnected=!1,a()}(),function(){function a(){h.log("init"),V.on(V.events.ON_USER_READY,b),V.on(V.events.ON_PROJECT_READY,d),V.on(V.events.ON_CONNECTION_SUCCESS,c)}function b(a){h.log("onUserRead"),e=a}function c(a){h.log("onConnectionSuccess",f.name),g=a.room(f.name),g.join().then(function(a){V.dispatch(V.events.ON_TRACK_CONNECTION_SUCCESS,a.room)},function(a){h.log("	Track Connection Error %o",a),V.dispatch(V.events.ON_TRACK_CONNECTION_ERROR,a)})}function d(a){h.log("onProjectReady %o",a),f=a}var e,f,g,h=new i("trackRoomService","color:#9900FF");a()}(),function(){function b(b){c.log("Track connected"),b.self().key("status").set(C.getRoot().status);var d=b._connection._user.id.split(":").pop(),e=b.channel(d);c.log("listening on channel %s",d),b.channel("public").on("message",function(a,b){c.log("message received on PUBLIC",a,b)}),e.on("message",function(b,e){c.log("message received on "+d,b,e);var f=a.util.array.toArray(b),g=f.shift(),h=g.split(":").pop();C[h].apply(C,f)}),a.each(C.events.runner,function(a){C.on(a,function(){var a=C.getRoot();b.self().key("progress").set({timeRemaining:a.timeLeft,percent:a.progress},function(a){c.log(a)})})}),b.self().key("track").on("set",function(a){c.log("	test loaded %s",a.name),C.loadTest(a)}),b.self().key("scenarios").on("set",function(a){c.log("	scenario registered %s",a.name),C.registerScenario(a)})}var c=new i("trackRoomListeners","color:#6633FF");V.on(V.events.ON_TRACK_CONNECTION_SUCCESS,b),c.log("what is ua",navigator.userAgent),V.dispatch(V.events.ON_USER_READY,X),V.dispatch(V.events.ON_PROJECT_READY,W)}()}(this.go=this.go||{},function(){return this}());